<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Configurando os arquivos básicos de um pacote • meupacoter</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Configurando os arquivos básicos de um pacote">
<meta property="og:description" content="meupacoter">
<meta property="og:image" content="https://bendeivide.github.io/meupacoter/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-183980834-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-183980834-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">meupacoter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Como desenvolver pacotes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introd_pkg.html">Passo 0 - Introdução a desenvolvimento de pacotes</a>
    </li>
    <li>
      <a href="../articles/construindo_pacote.html">Passo 1 - Construindo o esqueleto de um pacote</a>
    </li>
    <li>
      <a href="../articles/conf_files_pkg.html">Passo 2 - Configurando os arquivos básicos de um pacote</a>
    </li>
    <li>
      <a href="../articles/check_pkg.html">Passo 3 - Checando o pacote</a>
    </li>
    <li>
      <a href="../articles/submit.html">Passo 4 - Submetendo o pacote ao CRAN</a>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Passos e temas adicionais</a>
      <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Desenvolvimento de pacotes</li>
        <li class="divider">
        <li class="dropdown-header">Criar um repositório GitHub para o pacote</li>
        <li>
          <a href="../articles/construindo_website.html">Criar uma website para o pacote</a>
        </li>
        <li class="dropdown-header">Criar tutoriais do pacote (vignettes)</li>
        <li class="dropdown-header">Criando o arquivo README</li>
        <li class="dropdown-header">Criando o arquivo index</li>
        <li>
          <a href="../articles/badges.html">Medidores de qualidade de um pacote</a>
        </li>
        <li>
          <a href="../articles/datasetr.html">Inserindo dados em um pacote</a>
        </li>
        <li class="dropdown-header">Inserindo imagens na documentação do pacotes</li>
        <li>
          <a href="../articles/interpack.html">Internacinalização de pacotes</a>
        </li>
        <li class="dropdown-header">Criação de GUI para o pacote</li>
        <li>
          <a href="../articles/other_languages.html">Integração com outras linguagens de programação</a>
        </li>
        <li class="dropdown-header">Subdiretórios adicionais</li>
        <li class="divider">
        <li class="dropdown-header">R avançado</li>
        <li class="divider">
        <li class="dropdown-header">Ambientes em R</li>
        <li class="dropdown-header">Programação defensiva</li>
        <li>
          <a href="../articles/class_object.html">Classe e Métodos de objetos</a>
        </li>
        <li class="dropdown-header">Paralelização de funções</li>
      </ul>
</li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    Atualizações
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Função do pacote
  </a>
</li>
<li>
  <a href="../articles/faq.html">
    <span class="fa fa-question-circle-o"></span>
     
    faq
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bendeivide/meupacoter">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.facebook.com/bendeivide/">
    <span class="fab fa fab fa-facebook"></span>
     
  </a>
</li>
<li>
  <a href="https://www.instagram.com/bendeivide/">
    <span class="fab fa fab fa-instagram"></span>
     
  </a>
</li>
<li>
  <a href="https://benalana.blogspot.com/">
    <span class="fab fa fab fa-blogger"></span>
     
  </a>
</li>
<li>
  <a href="http://youtube.com/bendeivide">
    <span class="fab fa fab fa-youtube-square"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="conf_files_pkg_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Configurando os arquivos básicos de um pacote</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bendeivide/meupacoter/blob/master/vignettes/conf_files_pkg.Rmd"><code>vignettes/conf_files_pkg.Rmd</code></a></small>
      <div class="hidden name"><code>conf_files_pkg.Rmd</code></div>

    </div>

    
    
<div id="introdução" class="section level2">
<h2 class="hasAnchor">
<a href="#introdu%C3%A7%C3%A3o" class="anchor"></a>Introdução</h2>
<p>Os arquivos do pacote, mencionados na Subseção <a href="construindo_pacote.html#sec-esqueleto">Esqueleto básico de um pacote R</a>, serão agora editados, uma vez que o <a href="https://rstudio.com/">RStudio</a> constroi apenas um modelo para os arquivos.</p>
<p>Inicialmente, iremos apresentar duas rotinas para a construção do pacote:</p>
<ul>
<li><a href="https://github.com/bendeivide/meupacote/blob/main/R/aritmetica.R">aritmetica.R</a></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Sem edição do pacote `roxygen2`</span>
<span class="va">aritmetica</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="va">a</span>, <span class="va">b</span>, <span class="va">op</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># op: divisi, multi, soma, subtra</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">op</span> <span class="op">==</span> <span class="st">"divisi"</span><span class="op">)</span> <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">divisi</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">op</span> <span class="op">==</span> <span class="st">"multi"</span><span class="op">)</span> <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">multi</span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">op</span> <span class="op">==</span> <span class="st">"soma"</span><span class="op">)</span> <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">soma</span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">op</span> <span class="op">==</span> <span class="st">"subtra"</span><span class="op">)</span> <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">subtra</span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<ul>
<li><a href="https://github.com/bendeivide/meupacote/blob/main/R/auxiliar.R">auxiliar.R</a></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Funcoes auxiliares</span>

<span class="co"># Soma</span>
<span class="va">soma</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span>
          <span class="va">calculo</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">+</span> <span class="va">b</span>
          <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">calculo</span><span class="op">)</span>
<span class="op">}</span>

<span class="co">#Subtracao</span>
<span class="va">subtra</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span>
            <span class="va">calculo</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">-</span> <span class="va">b</span>
            <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">calculo</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Multiplicacao</span>
<span class="va">multi</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span>
           <span class="va">calculo</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">*</span> <span class="va">b</span>
           <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">calculo</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Divisao</span>
<span class="va">divisi</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="op">{</span>
            <span class="va">calculo</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">/</span> <span class="va">b</span>
            <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">calculo</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>A ideia dessas funções é muito simples, apresentar as quatro operações básicas entre dois números. Claro que não faz sentido desenvolver um pacote para algo trivial. Contudo, o enfoque é entender as peculiaridades do processo de construção de um pacote.</p>
<p>E um passo muito interessante ocorre sobre essas duas rotinas, pois uma iremos exportar e a outra não. Isto significa que ao carregar o pacote, funções do pacote que não são exportáveis, tornam-se invisíveis, podendo ser observadas apenas abrindo o arquivo <strong>nome_pacote.tar.gz</strong>. Às vezes, desejamos omitir algumas funções que são auxiliares para o nosso código. Isso significa, que elas sozinhas não terão utilidades. Dessa forma, não se faz necessário apresentá-las. Em outras situações, o que fazemos é omitir ou dificultar a visualização de determinadas funções, por algum interesse, mesmo sabendo que o código é aberto.</p>
<p>No nosso caso, apenas a função <code>aritmetica</code> será exportável. Perceba, que o cerne do pacote está na rotina <a href="https://github.com/bendeivide/meupacote/blob/main/R/auxiliar.R">auxiliar.R</a>, pois é nela que temos as quatro funções para as operações aritméticas. Veremos mais a frente como definir a exportação de funções em um pacote.</p>
</div>
<div id="atualizando-as-funções-do-pacote" class="section level2">
<h2 class="hasAnchor">
<a href="#atualizando-as-fun%C3%A7%C3%B5es-do-pacote" class="anchor"></a>Atualizando as funções do pacote</h2>
<p>Como já falado na Seção <a href="construindo_pacote.html">Construindo o esqueleto de um pacote R</a>, o subdiretório <em>R/</em> é o local para armazenar as rotinas do pacote. Dessa forma, vamos fazer as atualizações retirando os arquivos <em>.R</em> criados pelo <a href="https://rstudio.com/">RStudio</a>, e inserindo as rotinas do pacote (<a href="https://github.com/bendeivide/meupacote/blob/main/R/aritmetica.R">aritmetica.R</a> e <a href="https://github.com/bendeivide/meupacote/blob/main/R/auxiliar.R">auxiliar.R</a>). Lembre-se das <a href="introd_pkg.html#goodpractice">boas práticas de como escrever um código R</a>.</p>
<p align="center">
<a href="https://github.com/bendeivide/meupacoter/tree/main/projetos/proj-atualizado/meupacoter"> <img src="esqueleto2.png" alt="Esqueleto de um pacote R" width="30%"></a>
</p>
</div>
<div id="description" class="section level2">
<h2 class="hasAnchor">
<a href="#description" class="anchor"></a>Editando o arquivo <em>DESCRIPTION</em>
</h2>
<p>Quando nós <a href="construindo_pacote.html#building_rpack">criamos um projeto de pacote</a> usando o <a href="https://rstudio.com/">RStudio</a>, um arquivo chamado <em>DESCRIPTION</em> é criado no diretório do projeto do pacote. Talvez um dos mais importantes arquivos do pacote, pois esse arquivo contém os metadados sobre as característica do pacote, como o seu nome, título, versão, autor, descrição, licença, dentre outras opções.</p>
<p>A estrutura básica é que cada linha se inicia com o nome do campo seguido de “:”, posteriormente, se insere a atribuída a esse campo. Segundo o manual <a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file">Writing R extensions</a>, os campos <code>Package</code>, <code>Version</code>, <code>Licence</code>, <code>Description</code>, <code>Title</code>, <code>Author</code> e <code>Mantainer</code> são obrigatórios . Todos os outros campos são opcionais. Todo o <em>DESCRIPTION</em> deve ser escrito em ASCII, isto é, caracteres sendo letras e números. Para utilizar caracteres diferentes, deve ser acrescentado o campo <code>Encoding</code> e informar o tipo de codificação. No pacote <a href="https://bendeivide.github.io/meupacoter/">meupacoter</a>, por exemplo, foi utilizado <code>Encoding: UTF-8</code>.</p>
<pre class="description"><code>Package: nome do pacote
Title: O que o pacote faz (Em uma linha)
Version: 0.0.0.9000
Authors@R: 
    person(given = "First",
           family = "Last",
           role = c("aut", "cre"),
           email = "first.last@example.com",
           comment = c(ORCID = "YOUR-ORCID-ID"))
Maintainer: Nome e email do mantenedor do pacote
Description: O que o pacote faz (Em um parágrafo).
License: Qual a licença que você usa</code></pre>
<p>Iremos discutir a ideia sobre alguns desses campos a seguir.</p>
<div id="nome-do-pacote" class="section level3">
<h3 class="hasAnchor">
<a href="#nome-do-pacote" class="anchor"></a>Nome do pacote</h3>
<p>A discução sobre o nome do pacote foi realizado na subseção <a href="introd_pkg.html#name_logo_pkg">Escolha do nome e logo do pacote</a>. O campo para o nome é <code>Package</code>, com as seguintes características (<a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file">Writing R extensions</a>):</p>
<ul>
<li>deve conter somente letras, números e ponto;</li>
<li>ter pelo menos dois caracteres;</li>
<li>começar com uma letra</li>
<li>não terminar com um ponto.</li>
</ul>
<p>Esse campo não deve ser utilizado para explicar o que o pacote faz. Para isso use o campo <code>Description</code>.</p>
</div>
<div id="título-do-pacote" class="section level3">
<h3 class="hasAnchor">
<a href="#t%C3%ADtulo-do-pacote" class="anchor"></a>Título do pacote</h3>
<p>O campo para o título do pacote é <code>Title</code>. Nele deve conter uma pequena descrição do pacote em uma única linha. Seguem alguns requisitos (<a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file">Writing R extensions</a>):</p>
<ul>
<li>Não use marcações for do pacrão ASCII;</li>
<li>Não finalize o título com um ponto;</li>
<li>Não repita o nome do pacote no título;</li>
<li>Se usar a referência de outros pacotes no título, use aspas simples (‘<outrs_pacotes>’), se referenciar livros, aspas duplas (“nome_livros”);</outrs_pacotes>
</li>
<li>Geralmente limitado em 65 caracteres.</li>
</ul>
</div>
<div id="controle-de-versão-do-pacote" class="section level3">
<h3 class="hasAnchor">
<a href="#controle-de-vers%C3%A3o-do-pacote" class="anchor"></a>Controle de versão do pacote</h3>
<p>O campo responsável pela versão do pacote é <code>Version</code>. Deve ser uma sequência de ao menos dois números não negativos inteiros separados por um ponto (‘.’) ou traço (‘-’). Por exemplo, 1.1 e 0.9.1-10 são versões válidas, mas essas versões 2 ou 2.0-devel não são válidas. No livro <a href="https://combine-australia.github.io/r-pkg-dev/versioning.html">R packages</a>, temos uma descrição detalhada e abordada a seguir. Usaremos também uma abordagem feita pelo <a href="http://combine.org.au">COMBINE</a>, pelo material <a href="https://combine-australia.github.io/r-pkg-dev/">R package workshop</a>.</p>
<p>Podemos dizer que a estrutura do controle de versão é formado por uma sequência de quatro dígitos: <code>&lt;maior&gt;.&lt;menor&gt;.&lt;trecho&gt;.&lt;desenvolvimento&gt;</code>. Vejamos,</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version</a></span><span class="op">(</span><span class="st">"1.9"</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version</a></span><span class="op">(</span><span class="st">"1.9.0"</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version</a></span><span class="op">(</span><span class="st">"1.9"</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">numeric_version</a></span><span class="op">(</span><span class="st">"1.9.0.0"</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>Isso significa dizer, se usarmos ao menos dois dígitos, os outros dígitos serão completados por zero (<em>default</em>). Vejamos o que significa cada dígito:</p>
<ul>
<li>Dígito <code>&lt;maior&gt;</code>: esse dígito é alterado quando o pacote passa por uma mudança significativa na atualização;</li>
<li>Dígito <code>&lt;menor&gt;</code>: esse dígito é alterado quando ocorre alguma funcionalidade foi adicionada ao pacote, como criação de funções, atualizações de funções com os códigos existentes, etc;</li>
<li>Dígito <code>&lt;trecho&gt;</code>: esse dígito se altera quando ocorre correções de erros (<code>bugs</code>) no pacote, mas não é acrescido nada de novo. Uma forma interessante de encontrar esses erros é criar uma página de problemas do pacote, e à medida que ocorre a experiência do usário com o pacote, alguns problemas podem ocorrer que não eram previstos pelo desenvolvedor. Dessa forma, esses problemas podem ser postados nessa página específica. No Github há uma aba chamada <em>issues</em> nos repositórios criados, que é específico para isso, e o link dessa página pode ser inserido no campo <code>BugReports</code> no arquivo <em>DESCRIPTION</em>;</li>
<li>Dígito <code>&lt;desenvolvimento&gt;</code>: o dígito 9000 é utilizado quando o pacote está em desenvolvimento. Com essa codigifcação, podemos esperar mudanças muito rápidas no pacote.</li>
</ul>
<p>Caso deseje alterar algum dos dígitos, o desenvolvedor pode alterar diretamente no arquivo <em>DESCRPTION</em>, ou usando (Exemplo realizado para o <a href="https://bendeivide.github.io/meupacoter/">meupacoter</a>):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>usethis<span class="op">::</span><span class="kw">use_version</span>()</span>
<span id="cb5-2"><a href="#cb5-2"></a>Setting active project to <span class="st">'~/meupacoter'</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>There are uncommitted changes. Do you want to proceed anyway?</span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="dv">1</span><span class="op">:</span><span class="st"> </span>Negative</span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="dv">2</span><span class="op">:</span><span class="st"> </span>Nope</span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="dv">3</span><span class="op">:</span><span class="st"> </span>Yup</span>
<span id="cb5-8"><a href="#cb5-8"></a></span>
<span id="cb5-9"><a href="#cb5-9"></a>Selection<span class="op">:</span><span class="st"> "&lt;Escolhe uma das opções e digita: 1, 2 ou 3&gt;"</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>Current version is <span class="dv">0</span>.<span class="dv">0</span>.<span class="dv">0</span>.<span class="fl">9000.</span></span>
<span id="cb5-11"><a href="#cb5-11"></a>Which part to increment? (<span class="dv">0</span> to exit) </span>
<span id="cb5-12"><a href="#cb5-12"></a></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="dv">1</span><span class="op">:</span><span class="st"> </span>major <span class="op">-</span>-&gt;<span class="st"> </span><span class="dv">1</span>.<span class="fl">0.0</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="dv">2</span><span class="op">:</span><span class="st"> </span>minor <span class="op">-</span>-&gt;<span class="st"> </span><span class="dv">0</span>.<span class="fl">1.0</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="dv">3</span><span class="op">:</span><span class="st"> </span>patch <span class="op">-</span>-&gt;<span class="st"> </span><span class="dv">0</span>.<span class="fl">0.1</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="dv">4</span><span class="op">:</span><span class="st">   </span>dev <span class="op">-</span>-&gt;<span class="st"> </span><span class="dv">0</span>.<span class="dv">0</span>.<span class="fl">0.9001</span></span>
<span id="cb5-17"><a href="#cb5-17"></a></span>
<span id="cb5-18"><a href="#cb5-18"></a>Selection<span class="op">:</span><span class="st"> "&lt;Escolhe uma das opções e digita: 1, 2 ou 3&gt;"</span></span></code></pre></div>
<p>A primeira versão de um pacote que inicia o seu desenvolvimento é 0.0.0.9000.</p>
<p>Nós, particularmente, estamos usando a seguinte estratégia para o <a href="https://bendeivide.github.io/meupacoter/">meupacoter</a>, como o pacote está em desenvolvimento, e sua finalidade é ensinar a desenvolver pacotes, o que pretendemos é criar páginas web com o passo-a-passo. Assim, estamos usando o quarto dígito <code>9000</code>. Os acréscimos realizados sob o <a href="http://github.com">GitHub</a>, que levam em consideração as páginas web, estão alterando o dígito menor, porque a primeira versão quando for submetida ao <a href="http://cran.r-project.org">CRAN</a>, será <code>1.0.0</code>, de modo que o pacote estará estável, não haverá mais alterações no dígito maior (assim, esperamos!), apenas nos demais.</p>
<p>De fato, as sugestões dos números de versão mencionadas por <a href="https://combine-australia.github.io/r-pkg-dev/versioning.html">R packages</a> e <a href="https://combine-australia.github.io/r-pkg-dev/">R package workshop</a> ocorrem a cada alteração lançada ao <a href="http://cran.r-project.org">CRAN</a>, e o controle dos três dígitos para a versão, realmente é interessante. Entretanto, achamod que seguir a ideia dos três dígitos é interessante, mas não que isso fique martirzando a sua cabeça, uma vez que nos manuais do <a href="http://cran.r-project.org">CRAN</a> não há condições restritivas para essas escolhas. Caso deseje detalhes, é só consultar <a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file">Writing R extensions, DESCRIPTION</a>.</p>
</div>
<div id="autor-e-mantenedor" class="section level3">
<h3 class="hasAnchor">
<a href="#autor-e-mantenedor" class="anchor"></a>Autor e Mantenedor</h3>
<p>Os campos responsáveis pela criação do pacote, de forma direta ou indireta, são <code>Autor</code> ou <code>Authors@R</code> e <code>Mantainer</code>. Começando pelo último, este campo representa a pessoa responsável por manter o pacote sobre o <a href="http://cran.r-project.org">CRAN</a>, correção, atualização, etc. Apenas ele tem esse poder e deve ser uma pessoa e não uma empresa, de modo que seja válido enquanto o pacote estiver disponível no <a href="http://cran.r-project.org">CRAN</a>. O campo <code>Autor</code> ou <code>Authors@R</code> representa as pessoas que desenvolveram o pacote. O que diferencia esses dois campos é a forma de inserir as informações. Para o campo <code>Authors@R</code>, ainda pode ser inserido funções adicionais aos autores, algo como especifícações do que cada autor contribuiu de fato ao desenvolvimento do pacote. Apresentamos quatro funções importantes:</p>
<ul>
<li>
<code>aut</code>: autores que fizeram contribuições significativas ao pacote;</li>
<li>
<code>cre</code>: mantenedor do pacote que estará responsável para resolver possíveis problemas do pacote;</li>
<li>
<code>ctb</code>: desenvolvedores que fizeram contribuições menores;</li>
<li>
<code>cph</code>: detentor dos direitos autorais, quando a autoria não é do autor, geralmente uma empresa.</li>
</ul>
<p>Se desejar uma especificação mais detalhada sobre o seu papel como desenvolvedor, consulte mais siglas em <a href="https://www.loc.gov/marc/relators/relaterm.html">full list of roles</a></p>
<p>A forma básica de inserir os dados no campo <code>Mantainer</code> o primeiro e o último nome, seguido do email entre (“&lt; &gt;”), por exemplo, <code>Mantainer: Ben Deivide &lt;ben.deivide@gmail.com&gt;</code>.</p>
<p>Para inserir as informações no campo <code>Author</code>, basta digitar o nome dos autores separados por vírgula, por exemplo: <code>Author: Ben Deivide, Daniel Furtado, Diego Arthur</code>.</p>
<p>Por fim, como já falado acima, uma descrição mais completa pode ser usando o campo <code>Authors@R</code>, inserindo a especificação de cada autor ao desenvolvimento do pacote, usando as siglas acima. E ainda mais, não será necessário inserir no arquivo <em>DESCRIPTION</em> o campo <code>Mantainer</code>. Veremos a seguir, um exemplo do pacote <a href="https://bendeivide.github.io/midrangeMCP/">midrangeMCP</a>:</p>
<pre class="description_author"><code>Authors@R: c(
    person(given = "Ben", 
           family = "Deivide", 
           email = "ben.deivide@ufsj.edu.br", 
           role = c("aut", "cre"), 
           comment = c(ORCID = '0000-0001-7019-8794')),
    person(given = "Daniel", 
           family = "Furtado", 
           email = "danielff@dex.ufla.br", 
           role = "aut",
           comment = c(ORCID = '0000-0002-4371-5239')),
    person(given = "Diego", 
           family = "Arthur", 
           email = "digo.arthur@hotmail.com", 
           role = "ctb"))</code></pre>
<p>Dentro do campo <code>Authors@R</code>, inserimos para cada desenvolvedor, uma descrição dentro da função chamada <code>person</code>, do pacote <code>utils</code>, veja o resultado da sua execução:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"> <span class="fu"><a href="https://rdrr.io/r/utils/person.html">person</a></span><span class="op">(</span>given <span class="op">=</span> <span class="st">"Ben"</span>, 
           family <span class="op">=</span> <span class="st">"Deivide"</span>, 
           email <span class="op">=</span> <span class="st">"ben.deivide@ufsj.edu.br"</span>, 
           role <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"aut"</span>, <span class="st">"cre"</span><span class="op">)</span>, 
           comment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>ORCID <span class="op">=</span> <span class="st">'0000-0001-7019-8794'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "Ben Deivide &lt;ben.deivide@ufsj.edu.br&gt; [aut, cre] (&lt;https://orcid.org/0000-0001-7019-8794&gt;)"</span></code></pre></div>
<p>Na função <code>person</code> o primeiro argumento representa o primeiro nome do autor (<code>given</code>) e o segundo (<code>family</code>), o último nome. Posteriormente, temos o argumento para o email (<code>email</code>), e em seguida, o argumento para identificar a especificação do autor para o pacote (argumento <code>role</code>). Por fim, acrescentamos em <code>comment</code>, uma informação adicional que foi o <a href="https://orcid.org/">ORCID</a> dos respectivos autores. Percebam pelas regras atribuídas aos desenvolvedores que Ben Deivide e Daniel Furtado são autores (regra <code>'aut'</code>), e o primeiro é também mantenedor (regra <code>'cre'</code>). No caso de Diego Arthur, como o seu desenvolvimento teve menores contribuições ao pacote, a regra foi <code>'ctb'</code>. Dessa forma, não será necessário inserir o campo <code>Mantainer</code>.</p>
</div>
<div id="descrição" class="section level3">
<h3 class="hasAnchor">
<a href="#descri%C3%A7%C3%A3o" class="anchor"></a>Descrição</h3>
<p>O campo responsável no arquivo <em>DESCRIPTION</em> para descrever e detalhar o que faz o pacote é <code>Description</code>. Deve conter apenas um parágrafo. Vejamos mais algumas informações (<a href="https://combine-australia.github.io/r-pkg-dev/versioning.html">R packages</a>):</p>
<ul>
<li>Evite iniciar a descrição com o nome do pacote, ao invés, use <em>Esse pacote…</em> ou algo similar;</li>
<li>Quando a descrição estiver em mais de uma linha, cada linha deve conter no máximo 80 caracteres, e a partir da segunda linha, dê 4 espaços para iniciá-la;</li>
<li>Assim como no campo <code>Title</code>, devemos usar aspas duplas (“texto”) para referenciar livros, artigos, aspas simples para palavras que não estão em inglês, incluindo nomes de pacotes, softwares externos, etc.</li>
<li>Para utilização de sites, use aspas simples com colchetes angulares, isto é, ‘<a href="https://www.r-project.org" class="uri">https://www.r-project.org</a>’.</li>
</ul>
<p>Vejamos um exemplo do campo <code>Description</code> no arquivo <em>DESCRIPTION</em> do pacote <a href="https://cran.r-project.org/web/packages/gnomeGUI/index.html">midrangeMCP</a>:</p>
<pre><code>Description: Apply tests of multiple comparisons based
    on studentized 'midrange' and 'range' distributions. 
    The tests are: Tukey Midrange ('TM' test),
    Student-Newman-Keuls Midrange ('SNKM' test), 
    Means Grouping Midrange ('MGM' test) and 
    Means Grouping Range ('MGR' test). The articles of these 
    tests are in the submission phase, and we will soon update 
    the references.</code></pre>
</div>
<div id="campos-opcionais-ao-description" class="section level3">
<h3 class="hasAnchor">
<a href="#campos-opcionais-ao-description" class="anchor"></a>Campos opcionais ao <em>DESCRIPTION</em>
</h3>
<p>Alguns campos adicionais são interessantes e deixamos na tabela abaixo para consulta (<a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file">Writing R extensions, DESCRIPTION</a>).</p>
<table class="table">
<colgroup>
<col width="59%">
<col width="40%">
</colgroup>
<thead><tr class="header">
<th>Campos opcionais</th>
<th>Finalidade</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>Data</code></td>
<td>Insere a data atualizada para submissão ao <a href="http://cran.r-project.org">CRAN</a>. Essa data é preferível deixar não ser colocada. Já tivemos rejeição de pacotes, simplesmente porque a data estava desatualizada.</td>
</tr>
<tr class="even">
<td><code>Depends</code></td>
<td>Campo utilizado para fornecer uma lista de pacotes, separados por vírgula, que o seu pacote depende. Esses pacotes serão também instalados quando solicitar a instalação de seu pacote pela função <code>install.packages</code>. Ao carregar e anexar o seu pacote, usando <code>library</code> ou <code>require</code>, os pacotes em <code>Depends</code> também serão anexados, isto é, todas as funções do pacote nesse campo estará disponível no <a href="conf_files_pkg.html#subsec-namespace">caminho de busca</a>. Para mais detalhes, ver Subseçções <a href="conf_files_pkg.html#campo-depends">Campo <em>Depends</em></a> e <a href="conf_files_pkg.html#subsec-depimp">Uso de pacotes dependentes em <em>Imports</em> ou <em>Depends</em>?</a>.</td>
</tr>
<tr class="odd">
<td><code>Imports</code></td>
<td>Campo utilizado para fornecer uma lista de pacotes, separados por vírgula, que o seu pacote depende. Contudo, ao carregar e anexar o seu pacote, os pacotes em <code>Imports</code> serão apenas carregados. Funções que usamos os operadores “::” ou “:::”, também deverão ser listados aqui, ou nos campos <code>Suggests</code> ou <code>Enhances</code>. Para mais detalhes, ver Subseção <a href="conf_files_pkg.html#subsec-depimp">Uso de pacotes dependentes em <em>Imports</em> ou <em>Depends</em>?</a>.</td>
</tr>
<tr class="even">
<td><code>Suggests</code></td>
<td>Esse campo usa a mesma sintaxe do campo <code>Depends</code> e lista os pacotes que não são necessariamente necessários. Geralmente são pacotes utilizados nos exemplos de documentação de ajuda do pacote (arquivos do subdiretório <code>man/~.Rd</code>), ou na descrição de um conjunto de dados inseridos no pacote; no auxílio dos tutoriais (<em>vignettes</em>), dentre outras situações, que não impede o bom funcionamento do pacote.</td>
</tr>
<tr class="odd">
<td><code>Enhances</code></td>
<td>Campo que lista os pacotes que forncem um aprimoramento do pacote em questão, por exemplo, forncendo métodos para as classes desses pacotes ou maneiras de manipular objetos.</td>
</tr>
<tr class="even">
<td><code>SystemRequirements</code></td>
<td>Dependências externas ao sistema <a href="http://r-project.org">R</a> devem ser listadas no campo <code>SystemRequirements</code>, sendo detalhados essa integração no arquivo <em>README</em>. Para mais detalhes veja a Subseção <a href="conf_files_pkg.html#ext_files_r">Uso do campo <em>SystemRequirement</em></a>.</td>
</tr>
<tr class="odd">
<td><code>NeedsCompilation</code></td>
<td>Campo utilizado para identíficar códigos que necessitam de compilação antes da instalação do pacote. Nesse caso o campo deve assumir <code>NeedsCompilation:yes</code>. Caso contrário, se o pacote ao ser instalado em quaiquer plataformas e não precisar ser instalado ferramentas adicionais, use <code>NeedsCompilation:no</code>, esse é o padrão. Geralmente quando usamos o comando <code>R CMD build</code> para a compilação do pacote binário para a utilização no SO Windows, e esse pacote apresenta o subdiretório <code>src</code>, usamos <code>NeedsCompilation:yes</code>. Quando usamos esse tipo de compilação, não há no arquivo <em>DESCRIPTION</em> o campo <code>Authors@R</code>, por exemplo, e sim, os campos <code>Mantainer</code> e <code>Author</code>.</td>
</tr>
<tr class="even">
<td><code>License</code></td>
<td>
<a href="https://www.r-project.org/Licenses/">Licença R</a>, <a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file">Writing R extensions,DESCRIPTION</a>
</td>
</tr>
<tr class="odd">
<td><code>Copyright</code></td>
<td>Usado quando o detentor dos direitos autorais não forem os autores. Se desejar, poderá inserir um arquivo (<code>COPYRIGHTS</code>) no pacote para um maior detalhamento. O convencional é usar o subdiretório <code>inst</code>, isto é, <code>inst/COPYRIGHTS</code>.Ver Seção <a href="subdir_add.html#subdir_inst">Subdiretórios adicionais</a>.</td>
</tr>
<tr class="even">
<td><code>Additional_repositories</code></td>
<td>O campo <code>Additional_repositories</code> é uma lista separada por vírgulas de URLs de repositório onde os pacotes nomeados em outros campos podem ser encontrados.</td>
</tr>
<tr class="odd">
<td><code>LinkingTo</code></td>
<td>Um pacote que deseja fazer uso de arquivos de cabeçalho em outros pacotes para compilar seu código <em>C/C++</em> precisa declará-los como uma lista separada por vírgulas no campo <code>LinkingTo</code> no arquivo <em>DESCRIPTION</em>. Para detalhes veja o Git do pacote <a href="https://github.com/eddelbuettel/bh#bh-boost-headers-for-r">BH</a>.</td>
</tr>
<tr class="even">
<td><code>BugReports</code></td>
<td>Campo que apresenta uma única URL específica para se reportar a erros do pacote. Uma das opções de hospedagem é via Github, na seção <em>issues</em>, veja a seção <a href="construindo_website.html">Criar uma website para o pacote</a>. Caso deseje especificar outro email para os possíveis erros, use o campo <code>Contact</code> para isso.</td>
</tr>
<tr class="odd">
<td><code>URL</code></td>
<td>Campo para especificas uma listas de URLs separados por vírgula, que hoespeda a sua página pessoal ou a página do pacote. Uma das opções de hospedagem é via Github. Veja a seção <a href="construindo_website.html">Criar uma website para o pacote</a>.</td>
</tr>
<tr class="even">
<td><code>LazyData</code></td>
<td>Campo lógico (<code>TRUE</code> ou <code>FALSE</code>), para para informar que existe um conjunto dados diponíveis no pacote para utilização.</td>
</tr>
<tr class="odd">
<td><code>KeepSource</code></td>
<td>O campo lógico <code>KeepSource</code> controla se o código do pacote é originado usando <code>keep.source = TRUE</code> ou <code>FALSE</code>: pode ser necessário excepcionalmente para um pacote projetado para ser sempre usado com <code>keep.source = TRUE</code>. Para mais detalhes, <a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file">Writing R extensions, DESCRIPTION</a>.</td>
</tr>
<tr class="even">
<td><code>ByteCompile</code></td>
<td>O campo lógico <code>ByteCompile</code> controla se o código do pacote deve ser compilado por byte na instalação: o padrão é compilar por byte. Isso pode ser sobrescrito instalando com o sinalizador <code>--no-byte-compile</code>. Para mais detalhes, <a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file">Writing R extensions, DESCRIPTION</a>
</td>
</tr>
<tr class="odd">
<td><code>UseLTO</code></td>
<td>O campo lógico <code>UseLTO</code> é usado para o SO Unix para indicar se o código-fonte no pacote deve ser compilado com <em>Link-Time Optimization</em> (veja Usando <a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Using-Link_002dtime-Optimization">Link-Time Optimization</a>); se o R foi instalado com <code>--enable-lto</code> (<em>default</em>) ou <code>--enable-lto=R</code>.</td>
</tr>
<tr class="even">
<td><code>Collate</code></td>
<td>Campo utilizado para controlar a ordem de agrupamento para os arquivos de código R em um pacote quando estes são processados para instalação do pacote. Para mais detalhes, <a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file">Writing R extensions, DESCRIPTION</a>.</td>
</tr>
<tr class="odd">
<td><code>BuildVignettes</code></td>
<td>Campo utilizado para evitar a construção dos tutoriais (<em>vignettes</em>) ao construir o pacote usando <code>R CMD check</code>. Geralmente quando tem imagens grandes no pacote. Mas ao usar <code>R CMD check --as-cran</code> ele é criado, independente do valor para <code>BuildVignettes</code>. O que nós observamos para o RStudio é que mesmo esse campo com o valor. Essa opção, se o pacote <a href="https://roxygen2.r-lib.org/">roxigen2</a> está ativado para a construção de toda a documentação, os tutoriais (<em>vignettes</em>) são criados independentes dessa opção quando usamos o botão <strong>check</strong>, que tem o mesmo objetivo do comando <code>R CMD check</code>. na prática, esse campo não deve ser utilizado, a menos que o código do pacote não seja do tipo “código-aberto”.</td>
</tr>
<tr class="even">
<td><code>BuildVignetter</code></td>
<td>Campo responsável para informar quais os pacotes que renderizarão os tutoriais (vignettes). Pode ser informado o nome de um pacote ou uma lista de nomes de pacotes separados por vírgula. Por exemplo, em <a href="https://bendeivide.github.io/meupacoter/">meupacote</a>, nós usamos <code>VignetteBuilder: knitr</code>. Como na instalação do pacote, isso não é obrigatório, usamod no campo <code>Suggests: knitr, rmarkdown</code>, uma vez que o pacote <a href="https://rmarkdown.rstudio.com">rmarkdown</a> está apenas como sugestão pelo pacote <a href="https://yihui.org/knitr/">knitr</a>.</td>
</tr>
<tr class="odd">
<td><code>Type</code></td>
<td>Esse campo especifica a natureza do projeto. O padrão é assumir <code>Type: Package</code>. Por exemplo, podemos o pacote <a href="https://cran.r-project.org/packages=gnomeGUI">gnomeGUI</a>, foi desativado pelo CRAN, com natureza <em>frontend</em>, isto é, <code>Type: Frontend</code>.</td>
</tr>
<tr class="even">
<td><code>OS_type</code></td>
<td>Esse campo especifica os sistemas operacionais para os quais o pacote se destina, sendo as opções ‘unix’ ou ‘windows’, para indicar que o pacote só pode ser instalado em uma plataforma dessas plataformas.</td>
</tr>
<tr class="odd">
<td><code>Encoding</code></td>
<td>Campo utilizado para identificar a codificação do pacote, diferente de ASCII, usada no <em>DESCRIPTION</em>, <em>NAMESPACE</em>, arquivos do tipo <em>R</em> e <em>.Rd</em>. As opções são <code>latin1</code>, <code>latin2</code> e <code>UTF-8</code>
</td>
</tr>
<tr class="even">
<td><code>Language</code></td>
<td>Campo utilizado para identificar o idioma que o código foi escrito. O padrão de idioma é o Inglês. De acordo com <a href="https://cran.r-project.org/bin/windows/base/rw-FAQ.html#Languages-and-Internationalization">R for Windows FAQ: Languages and Internationalization</a>, as opções de idiomas são: <code>Catalan</code> (Catalão), <code>Simplified Chinese</code> (Chinês simplificado) <code>Traditional Chinese</code> (Chinês tradicional), <code>Czech</code> (Theco), <code>Danish</code> (Dinamarquês), <code>Dutch</code> (Holandês), <code>Finnish</code> (Finlandês), <code>French</code> (Francês), <code>German</code> (Alemão), <code>Greek</code> (Grego), <code>Hebrew</code> (Hebraico), <code>Hungarian</code> (Húngaro), <code>Italian</code> (Italiano), <code>Japanese</code> (Japonês), <code>Korean</code> (Coreano), <code>Norwegian</code> (Noroeguês), <code>Polish</code> (Polonês), <code>Portuguese (Brazil)</code> (Português brasileiro), <code>Portuguese (Portugal)</code> (Português de Portugal). O que sugerimos é que ao invés de utilizar o idioma nativo, pensando numa maior divulgação do pacote, o interessante é a internacionalização, ver Seção <a href="interpack.html">Internacionalização de pacotes</a>.</td>
</tr>
<tr class="odd">
<td><code>RdMacros</code></td>
<td>Campo utilizado para conter uma lista, separada por vírgula, de pacotes a partir da qual o pacote atual importará definições de macro Rd. Esses pacotes também devem estar listados nos campos <code>Imports</code> (ou ‘Depends’).</td>
</tr>
</tbody>
</table>
<p>Outros campos não mencionados acima, podem ser utilizados. Por exemplo, campos como <code>Note</code>, <code>Contact</code>, <code>MailingList</code>, <code>RoxygenNote</code>, dentre outros.</p>
<div id="campo-depends" class="section level4">
<h4 class="hasAnchor">
<a href="#campo-depends" class="anchor"></a>Campo <code>Depends</code>
</h4>
<p>Vejamos mais algumas características sobre esse campo:</p>
<ul>
<li>Os pacotes no campo <code>Depends</code> serão instalados usando o argumento <code>dependencies</code> na função <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages(pkgs = 'nome_pacote', dependencies =     TRUE)</a></code>, que <code>dependencies = TRUE</code> implica em instalar os pacotes do <code>Depends</code>, o dos campos <code>Imports</code>, <code>LinkingTo</code>, <code>Suggests</code>;</li>
<li>O padrão do argumento <code>dependencies</code> da função <code>install.packages</code> é <code>NA</code>, que implica em instalar os pacotes dos campos <code>Depends</code>, <code>Imports</code> e <code>LinkingTo</code>. Se desejar instalar tudo, basta usar <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages(pkgs = 'nome_pacote', dependencies = c("Depends", "Imports", "LinkingTo", "Suggests", "Enhances"))</a></code>. Os pacotes no campo <code>Depends</code> serão carregados antes dos pacotes de interesse serem carregados, usando <code>library</code> ou <code>require</code>;</li>
<li>Cada pacote no campo <code>Depends</code> por ser seguido de um parêntes identificando a versão desejada, isto é, <code>Depends: MASS (&gt;= 3.1)</code>. Contudo, ao inserir a versão, use apenas para os dois dígitos, evite inserir o dígito <code>&lt;trecho&gt;</code> (terceiro dígito);</li>
<li>Nesse campo também pode ser possível especificar determinada dependência da versão do <a href="http://r-project.org">R</a>, por exemplo, <code>Depends: R (&gt;= 3.6)</code>;</li>
<li>Pode ser repetido um pacote ou a versão R mais de uma vez, para limitar as versões aceitáveis;</li>
<li>Evite comentários nesse campo, pois tanto a biblioteca de pacotes quanto os recursos de verificação do pacote R, usam esse campo, e isso pode acabar gerando problema ao bom funcionamento da linguagem;</li>
</ul>
</div>
<div id="campo-imports" class="section level4">
<h4 class="hasAnchor">
<a href="#campo-imports" class="anchor"></a>Campo <code>Imports</code>
</h4>
<p>Como mencionado na Tabela acima, os pacotes no campo <code>Imports</code> não são anexados no <a href="conf_files_pkg.html#subsec-namespace">caminho de busca</a>. Isso acaba sendo interessante, porque o pacote desenvolvido acaba gerando menos conflito com funções de outros pacotes.</p>
<p>Uma recomendação interessante, <a href="https://r-pkgs.org/namespace.html?q=NAMES#imports">R packages</a>, é que ao usar o campo <code>Imports</code>, o pacote dependente não precisa ser mencionado em <em>NAMESPACE</em> caso seja utilizado o operador <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code> nas funções de seu pacote. Mais detalhes, ver <a href="conf_files_pkg.html#dep_imp_namespace">Relação entre os campos <code>Depends</code>, <code>Imports</code> e o <em>NAMESPACE</em></a>.</p>
</div>
<div id="subsec-depimp" class="section level4">
<h4 class="hasAnchor">
<a href="#subsec-depimp" class="anchor"></a>Uso de pacotes dependentes em <code>Imports</code> ou <code>Depends</code>?</h4>
<p>Basicamente, a diferença entre os campos <code>Depends</code> e <code>Imports</code> é que o primeiro apenas <strong>carrega</strong> o pacote, e o segundo <strong>anexa</strong>. Essa discussão foi bem documentada na Subseção <a href="conf_files_pkg.html#subsec-namespace">Editando o arquivo <em>NAMESPACE</em></a></p>
<p>Vejamos as regras gerais (<a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file">Writing R extensions, DESCRIPTION</a>):</p>
<ul>
<li>Um pacote dependente deve ser listado em apenas um campos dos campos <code>Depends</code> ou <code>Imports</code>;</li>
<li>Pacotes listados no <em>NAMESPACE</em> usando <code>import</code> ou <code>importFrom</code> devem ser listados sempre no campo <code>Imports</code> e não em <code>Depends</code>;</li>
<li>Caso seja necessário a utilização de todas as funções de pacotes dependentes, para o bom funcionamento do seu pacote usando a função <code>library</code> ou <code>require</code>, os pacotes dependentes devem adicionados no campo <code>Depends</code>;</li>
<li>Pacotes dependentes que utilizamos os seus conjuntos de dados em nosso pacote, devem ser listados no campo <code>Imports</code>.</li>
<li>Não faz sentido inserir em <code>Depends</code> ou <code>Imports</code> a dependência sobre o pacote <span class="math inline">\(\color{red}{base}\)</span>, porque esse pacote, está sempre <strong>carregado</strong> e <strong>anexado</strong>, isto é, no <strong>caminho de busca</strong>.</li>
</ul>
<p>O campo <code>Depends</code> atualmente deve ser usado raramente, apenas para a construção de pacotes em que desejamos que todas as funções dos pacotes dependentes estejam disponíveis para o usuário no <a href="conf_files_pkg.html#subsec-namespace"><strong>caminho de busca</strong></a>, ao carregar o pacote desenvolvido, por questão de facilidade para o usuário. Caso contrário, o uso do campo <code>Imports</code> é mais coerente.</p>
</div>
<div id="ext_files_r" class="section level4">
<h4 class="hasAnchor">
<a href="#ext_files_r" class="anchor"></a>Uso do campo <code>SystemRequirements</code>
</h4>
<p>O campo <code>SystemRequirements</code> quando utilizado no <em>DESCRIPTION</em>, significa que algum código não <a href="http://r-project.org">R</a> que está inserido em seu código, e precisa ser informado. Considere também que alguns pacotes já fizeram a integração de algumas linguagens, tais como: pacote <a href="rstudio.github.io/reticulate">reticulate</a> (<em>Phyton</em>), pacote <a href="https://cran.r-project.org/package=Rcpp">Rcpp</a> (<em>C++</em>), pacote <a href="http://www.rforge.net/rJava/">rJava</a> (<em>Java</em>), pacotes <a href="">tcltk</a> hoje da base do <a href="http://r-project.org">R</a> (<em>Tcl/Tk</em>), um complemento ao pacote anterior <a href="%5Btcltk2%5D(https://cran.r-project.org/package=tcltk2)">tcltk2</a> (<em>Tcl/Tk</em>), pacote <a href="https://cran.r-project.org/package=RGtk2">RGtk2</a> (<em>GTK+</em>), dentre muitos outros, esses já fizeram a parte árdua de integração. Assim, necessitando de alguma dessas linguagens e usando esses pacotes como dependentes, não é necessário a utilização do campo <code>SystemRequirements</code>.</p>
<p>O subdiretório <code>src</code> é utilizado para códigos que precisam ser compilados, tais como <em>C</em>, <em>C++</em>, <em>Fortran</em>, dentre outros. O subdiretório <code>exec</code> ou <code>inst</code> é usado para inserir scripts que precisam ser interpretados, tais como <em>Shell</em>, <em>BUGS</em>, <em>JavaScript</em>, <em>Matlab</em>, <em>Perl</em>, <em>php(amap)</em>, <em>Phyton</em>, <em>Tcl</em>. O caso da linguagem <em>Java</em>, o mecanismo é um pouco diferente, ver <a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file">Writing R extensions§1.1.7</a>. Observando os pacotes desenvolvidos, a convenção é usar no diretório <code>inst</code>, do tipo <code>inst/perl</code>, <code>inst/tcl</code>, etc. Vejam alguns exemplos de pacotes:</p>
<ul>
<li>
<a href="https://github.com/marcschwartz/WriteXLS">WriteXLS</a><code>/inst/Perl</code>, veja o seu <em>DESCRIPTION</em>:</li>
</ul>
<pre><code>Package: WriteXLS
Version: 6.1.0
Date: 2020-11-20
Title: Cross-Platform Perl Based R Function to Create Excel 2003 (XLS) and Excel 2007 (XLSX) Files
Description: Cross-platform Perl based R function to create Excel 2003 (XLS) and Excel 2007 (XLSX)
             files from one or more data frames. Each data frame will be
             written to a separate named worksheet in the Excel spreadsheet.
             The worksheet name will be the name of the data frame it contains
             or can be specified by the user. 
Author: Marc Schwartz &lt;marc_schwartz@me.com&gt; and various authors for Perl modules listed in each .pm file.
Copyright: The copyright holders of the Perl files are listed in each .pm file under the Perl directory.
Maintainer: Marc Schwartz &lt;marc_schwartz@me.com&gt;
License: GPL (&gt;= 2)
SystemRequirements: Perl
Imports: utils
URL: https://github.com/marcschwartz/WriteXLS
BugReports: https://github.com/marcschwartz/WriteXLS/issues</code></pre>
<ul>
<li>
<a href="http://www.rforge.net/rJava/">rJava</a><code>/src/java</code>, veja o seu <em>DESCRIPTION</em>:</li>
</ul>
<pre><code>Package: rJava
Version: (populated by mkdist!)
Title: Low-Level R to Java Interface
Author: Simon Urbanek &lt;simon.urbanek@r-project.org&gt;
Maintainer: Simon Urbanek &lt;simon.urbanek@r-project.org&gt;
Depends: R (&gt;= 2.5.0), methods
Description: Low-level interface to Java VM very much like .C/.Call and friends. Allows creation of objects, calling methods and accessing fields.
License: GPL-2
URL: http://www.rforge.net/rJava/
SystemRequirements: Java JDK 1.2 or higher (for JRI/REngine JDK 1.4 or higher), GNU make
BugReports: https://github.com/s-u/rJava/issues</code></pre>
<ul>
<li>
<a href="https://cran.r-project.org/package=tcltk2">tcltk2</a><code>/inst/tklibs</code>, veja o seu <em>DESCRIPTION</em>:</li>
</ul>
<pre><code>Package: tcltk2
Type: Package
Version: 1.2-11
Date: 2014-12-19
Title: Tcl/Tk Additions
Author: Philippe Grosjean [aut, cre]
Authors@R: c(person("Philippe", "Grosjean", role = c("aut", "cre"),
  email = "phgrosjean@sciviews.org"))
Maintainer: Philippe Grosjean &lt;phgrosjean@sciviews.org&gt;
Depends: R (&gt;= 2.8.0), tcltk
Suggests: utils
SystemRequirements: Tcl/Tk (&gt;= 8.5), Tktable (&gt;= 2.9, optional)
Description: A series of additional Tcl commands and Tk widgets with style
  and various functions (under Windows: DDE exchange, access to the
  registry and icon manipulation) to supplement the tcltk package
License: LGPL-3 + file LICENSE
URL: http://www.sciviews.org/SciViews-R
BugReports: https://r-forge.r-project.org/tracker/?group_id=194
Packaged: 2014-12-19 16:32:30 UTC; phgrosjean
NeedsCompilation: no
Repository: CRAN
Date/Publication: 2014-12-20 10:35:06</code></pre>
<ul>
<li>
<a href="https://cran.r-project.org/package=reticulate">reticulate</a><code>/inst/phyton/rpytools</code>, veja o seu <em>DESCRIPTION</em>:</li>
</ul>
<pre><code>Package: reticulate
Type: Package
Title: Interface to 'Python'
Version: 1.18-9000
Authors@R: c(
  person("Kevin", "Ushey", role = c("aut", "cre"),
         email = "kevin@rstudio.com"),
  person("JJ", "Allaire", role = c("aut"), email = "jj@rstudio.com"),
  person("RStudio", role = c("cph", "fnd")),
  person("Yuan", "Tang", role = c("aut", "cph"),
         email = "terrytangyuan@gmail.com",
         comment = c(ORCID = "0000-0001-5243-233X")),
  person("Dirk", "Eddelbuettel", role = c("ctb", "cph"),
         email = "edd@debian.org"),
  person("Bryan", "Lewis", role = c("ctb", "cph"),
         email = "blewis@illposed.net"),
  person("Sigrid", "Keydana", role = c("ctb"),
         email = "sigrid@rstudio.com"),
  person("Ryan", "Hafen", role = c("ctb", "cph"),
         email = "rhafen@gmail.com"),
  person("Marcus", "Geelnard", role = c("ctb", "cph"),
         comment = "TinyThread library, http://tinythreadpp.bitsnbites.eu/")
  )
Description: Interface to 'Python' modules, classes, and functions. When calling
    into 'Python', R data types are automatically converted to their equivalent 'Python'
    types. When values are returned from 'Python' to R they are converted back to R
    types. Compatible with all versions of 'Python' &gt;= 2.7.
License: Apache License 2.0
URL: https://github.com/rstudio/reticulate
BugReports: https://github.com/rstudio/reticulate/issues
SystemRequirements: Python (&gt;= 2.7.0)
Encoding: UTF-8
LazyData: true
Depends:
    R (&gt;= 3.0)
Imports:
    graphics,
    jsonlite,
    Matrix,
    methods,
    rappdirs,
    Rcpp (&gt;= 0.12.7),
    utils
Suggests:
    callr,
    knitr,
    rmarkdown,
    testthat
LinkingTo: Rcpp
RoxygenNote: 7.1.1
Roxygen: list(markdown = TRUE)
VignetteBuilder: knitr</code></pre>
<p>Por fim, a utilização do campo <code>SystemRequirements</code> necessita uma explicação mais detalhada sobre o pacote no arquivo <em>README</em>, pois para o bom funcionamento, precisamos muitas vezes fazer instalações externas ao sistema operacional em utilização. E mais uma vez, é um nível avançado de desenvolvimento de pacotes, pois não necessita apenas do conhecimento da linguagem <a href="http://r-project.org">R</a>, como também de outras linguagens. Um exemplo recente, foi um pacote chamado <a href="https://cran.r-project.org/package=gWidgets">gWidgets</a> que foi desativado devido a problemas de instalação do <em>GTK+</em>, que por sinal, um pacote muito bom para desenvolvimento de interfaces gráficas ao usuários, usando <em>Tcl/Tk</em> e <em>GTK+</em></p>
</div>
</div>
</div>
<div id="subsec-namespace" class="section level2">
<h2 class="hasAnchor">
<a href="#subsec-namespace" class="anchor"></a>Entendendo o <em>NAMESPACE</em>
</h2>
<p>Antes de iniciarmos a discussão sobre o que significa, qual o objetivo, e como utilizar o arquivo <em>NAMESPACE</em>, vamos entender inicialmente o que significa os termos <strong>instalar</strong>, <strong>carregar</strong> e <strong>anexar</strong> um pacote no R. A função <code>install.packages</code>, do pacote <span class="math inline">\(\color{red}{utils}\)</span><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>, é reponsável por fazer o <em>download</em> e a <strong>instalação</strong> de um pacote de algum repositório (<a href="cran.r-project.org">CRAN</a>, por exemplo). Este último significa que você o inseriu em sua biblioteca de pacotes do <a href="http://r-project.org">R</a> contidas no seu sistema operacional. Contudo, se ao tentar executar alguma função do pacote no <em>console</em>, certamente, será recebido uma mensagem de erro, como verificado a seguir.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># Instalando o pacote 'devtools'</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="kw">install.packages</span>(<span class="st">"devtools"</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co"># Instalando o pacote 'meupacoter'</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"bendeivide/meupacoter"</span>)</span>
<span id="cb13-6"><a href="#cb13-6"></a></span>
<span id="cb13-7"><a href="#cb13-7"></a>Downloading GitHub repo bendeivide<span class="op">/</span>meupacoter<span class="op">@</span>HEAD</span>
<span id="cb13-8"><a href="#cb13-8"></a>√  checking <span class="cf">for</span> file <span class="st">'C:\Users\MABENLA\...\DESCRIPTION'</span> (<span class="fl">1.8</span>s)</span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="op">-</span><span class="st">  </span>preparing <span class="st">'meupacoter'</span><span class="op">:</span><span class="st"> </span>(<span class="fl">2.8</span>s)</span>
<span id="cb13-10"><a href="#cb13-10"></a>√  checking DESCRIPTION meta<span class="op">-</span>information ... </span>
<span id="cb13-11"><a href="#cb13-11"></a><span class="op">-</span><span class="st">  </span>checking <span class="cf">for</span> LF line<span class="op">-</span>endings <span class="cf">in</span> source and make files and shell scripts</span>
<span id="cb13-12"><a href="#cb13-12"></a><span class="op">-</span><span class="st">  </span>checking <span class="cf">for</span> empty or unneeded directories</span>
<span id="cb13-13"><a href="#cb13-13"></a><span class="op">-</span><span class="st">  </span>building <span class="st">'meupacoter_0.2.0.9000.tar.gz'</span></span>
<span id="cb13-14"><a href="#cb13-14"></a>   </span>
<span id="cb13-15"><a href="#cb13-15"></a>Installing package into ‘C<span class="op">:</span><span class="er">/</span>Users<span class="op">/</span>MABENLA<span class="op">/</span>Documents<span class="op">/</span>R<span class="op">/</span>win<span class="op">-</span>library<span class="op">/</span><span class="fl">3.6</span>’</span>
<span id="cb13-16"><a href="#cb13-16"></a>(as ‘lib’ is unspecified)</span>
<span id="cb13-17"><a href="#cb13-17"></a><span class="op">*</span><span class="st"> </span>installing <span class="op">*</span>source<span class="op">*</span><span class="st"> </span>package <span class="st">'meupacoter'</span> ...</span>
<span id="cb13-18"><a href="#cb13-18"></a><span class="op">**</span><span class="st"> </span>using staged installation</span>
<span id="cb13-19"><a href="#cb13-19"></a><span class="op">**</span><span class="st"> </span>R</span>
<span id="cb13-20"><a href="#cb13-20"></a><span class="op">**</span><span class="st"> </span>inst</span>
<span id="cb13-21"><a href="#cb13-21"></a><span class="op">**</span><span class="st"> </span>byte<span class="op">-</span>compile and prepare package <span class="cf">for</span> lazy loading</span>
<span id="cb13-22"><a href="#cb13-22"></a><span class="op">**</span><span class="st"> </span>help</span>
<span id="cb13-23"><a href="#cb13-23"></a><span class="op">**</span><span class="er">*</span><span class="st"> </span>installing help indices</span>
<span id="cb13-24"><a href="#cb13-24"></a>  converting help <span class="cf">for</span> package <span class="st">'meupacoter'</span></span>
<span id="cb13-25"><a href="#cb13-25"></a>    finding HTML links ... done</span>
<span id="cb13-26"><a href="#cb13-26"></a>    aritmetica                              html  </span>
<span id="cb13-27"><a href="#cb13-27"></a><span class="op">**</span><span class="er">*</span><span class="st"> </span>copying figures</span>
<span id="cb13-28"><a href="#cb13-28"></a><span class="op">**</span><span class="st"> </span>building package indices</span>
<span id="cb13-29"><a href="#cb13-29"></a><span class="op">**</span><span class="st"> </span>installing vignettes</span>
<span id="cb13-30"><a href="#cb13-30"></a><span class="op">**</span><span class="st"> </span>testing <span class="cf">if</span> installed package can be loaded from temporary location</span>
<span id="cb13-31"><a href="#cb13-31"></a><span class="op">**</span><span class="er">*</span><span class="st"> </span>arch <span class="op">-</span><span class="st"> </span>i386</span>
<span id="cb13-32"><a href="#cb13-32"></a><span class="op">**</span><span class="er">*</span><span class="st"> </span>arch <span class="op">-</span><span class="st"> </span>x64</span>
<span id="cb13-33"><a href="#cb13-33"></a><span class="op">**</span><span class="st"> </span>testing <span class="cf">if</span> installed package can be loaded from final location</span>
<span id="cb13-34"><a href="#cb13-34"></a><span class="op">**</span><span class="er">*</span><span class="st"> </span>arch <span class="op">-</span><span class="st"> </span>i386</span>
<span id="cb13-35"><a href="#cb13-35"></a><span class="op">**</span><span class="er">*</span><span class="st"> </span>arch <span class="op">-</span><span class="st"> </span>x64</span>
<span id="cb13-36"><a href="#cb13-36"></a><span class="op">**</span><span class="st"> </span>testing <span class="cf">if</span> installed package keeps a record of temporary installation path</span>
<span id="cb13-37"><a href="#cb13-37"></a><span class="op">*</span><span class="st"> </span><span class="kw">DONE</span> (meupacoter)</span>
<span id="cb13-38"><a href="#cb13-38"></a>    </span>
<span id="cb13-39"><a href="#cb13-39"></a><span class="co"># tentando usar a função 'aritmetica' de meupacoter</span></span>
<span id="cb13-40"><a href="#cb13-40"></a><span class="kw">aritmetica</span>(<span class="dt">a =</span> <span class="dv">8</span>, <span class="dt">b =</span> <span class="dv">4</span>, <span class="dt">op =</span> <span class="st">'soma'</span>)</span>
<span id="cb13-41"><a href="#cb13-41"></a></span>
<span id="cb13-42"><a href="#cb13-42"></a>Error <span class="cf">in</span> <span class="kw">aritmetica</span>(<span class="dt">a =</span> <span class="dv">8</span>, <span class="dt">b =</span> <span class="dv">4</span>, <span class="dt">op =</span> <span class="st">"soma"</span>) <span class="op">:</span><span class="st"> </span></span>
<span id="cb13-43"><a href="#cb13-43"></a><span class="st">  </span>não foi possível encontrar a função <span class="st">"aritmetica"</span></span></code></pre></div>
<p>Isso significa que as funções do pacote ainda não estão disponíveis. Quando usamos a função <code>library</code> ou <code>require</code> em um pacote acontece duas coisas sequenciadas, o <strong>carregamento</strong> e o <strong>anexo</strong> do pacote no <strong>caminho de busca</strong>. O <strong>caminho de busca</strong> é o um conjunto de ambientes hierarquizados dos quais todos os objetos nesses ambientes podem ser encontrados no ambiente de trabalho corrente (<em>workspace</em>), isto é, basta digitar no console o nome de um função contida em um pacote, que está anexado ao <strong>caminho de busca</strong>, que essa função estará disponível para ser utilizada. O <strong>caminho de busca</strong> pode ser encontrado pela função <code>search</code> do pacote <span class="math inline">\(\color{red}{base}\)</span>. Para saber quais são esses pacotes, use a linha de comando:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span>lib.loc <span class="op">=</span> <span class="va">.Library</span><span class="op">)</span>
<span class="co">##</span>
<span class="co">#&gt; base                 The R Base Package</span>
<span class="co">#&gt; boot                 Bootstrap Functions (Originally by Angelo</span>
<span class="co">#&gt;                      Canty for S)</span>
<span class="co">#&gt; class                Functions for Classification</span>
<span class="co">#&gt; cluster              "Finding Groups in Data": Cluster</span>
<span class="co">#&gt;                      Analysis Extended Rousseeuw et al.</span>
<span class="co">#&gt; codetools            Code Analysis Tools for R</span>
<span class="co">#&gt; compiler             The R Compiler Package</span>
<span class="co">#&gt; datasets             The R Datasets Package</span>
<span class="co">#&gt; foreign              Read Data Stored by 'Minitab', 'S',</span>
<span class="co">#&gt;                      'SAS', 'SPSS', 'Stata', 'Systat', 'Weka',</span>
<span class="co">#&gt;                      'dBase', ...</span>
<span class="co">#&gt; graphics             The R Graphics Package</span>
<span class="co">#&gt; grDevices            The R Graphics Devices and Support for</span>
<span class="co">#&gt;                      Colours and Fonts</span>
<span class="co">#&gt; grid                 The Grid Graphics Package</span>
<span class="co">#&gt; KernSmooth           Functions for Kernel Smoothing Supporting</span>
<span class="co">#&gt;                      Wand &amp; Jones (1995)</span>
<span class="co">#&gt; lattice              Trellis Graphics for R</span>
<span class="co">#&gt; MASS                 Support Functions and Datasets for</span>
<span class="co">#&gt;                      Venables and Ripley's MASS</span>
<span class="co">#&gt; Matrix               Sparse and Dense Matrix Classes and</span>
<span class="co">#&gt;                      Methods</span>
<span class="co">#&gt; methods              Formal Methods and Classes</span>
<span class="co">#&gt; mgcv                 Mixed GAM Computation Vehicle with</span>
<span class="co">#&gt;                      Automatic Smoothness Estimation</span>
<span class="co">#&gt; nlme                 Linear and Nonlinear Mixed Effects Models</span>
<span class="co">#&gt; nnet                 Feed-Forward Neural Networks and</span>
<span class="co">#&gt;                      Multinomial Log-Linear Models</span>
<span class="co">#&gt; parallel             Support for Parallel computation in R</span>
<span class="co">#&gt; rpart                Recursive Partitioning and Regression</span>
<span class="co">#&gt;                      Trees</span>
<span class="co">#&gt; spatial              Functions for Kriging and Point Pattern</span>
<span class="co">#&gt;                      Analysis</span>
<span class="co">#&gt; splines              Regression Spline Functions and Classes</span>
<span class="co">#&gt; stats                The R Stats Package</span>
<span class="co">#&gt; stats4               Statistical Functions using S4 Classes</span>
<span class="co">#&gt; survival             Survival Analysis</span>
<span class="co">#&gt; tcltk                Tcl/Tk Interface</span>
<span class="co">#&gt; tools                Tools for Package Development</span>
<span class="co">#&gt; translations         The R Translations Package</span>
<span class="co">#&gt; utils                The R Utils Package</span></code></pre></div>
<p>O <strong>caminho de busca</strong> no <a href="http://r-project.org">R</a> utilizado no momento em que é escrito esse material foi:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Usando o pacote 'base'</span>
<span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;  [1] ".GlobalEnv"        "package:usethis"   "package:MCPtests" </span>
<span class="co">#&gt;  [4] "package:rlang"     "tools:rstudio"     "package:stats"    </span>
<span class="co">#&gt;  [7] "package:graphics"  "package:grDevices" "package:utils"    </span>
<span class="co">#&gt; [10] "package:datasets"  "package:methods"   "Autoloads"        </span>
<span class="co">#&gt; [13] "package:base"  </span>

<span class="co"># Mais detalhado</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"rlang"</span><span class="op">)</span>
<span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/search_envs.html">search_envs</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;  [[1]] $ &lt;env: global&gt;</span>
<span class="co">#&gt;  [[2]] $ &lt;env: package:usethis&gt;</span>
<span class="co">#&gt;  [[3]] $ &lt;env: package:MCPtests&gt;</span>
<span class="co">#&gt;  [[4]] $ &lt;env: package:rlang&gt;</span>
<span class="co">#&gt;  [[5]] $ &lt;env: tools:rstudio&gt;</span>
<span class="co">#&gt;  [[6]] $ &lt;env: package:stats&gt;</span>
<span class="co">#&gt;  [[7]] $ &lt;env: package:graphics&gt;</span>
<span class="co">#&gt;  [[8]] $ &lt;env: package:grDevices&gt;</span>
<span class="co">#&gt;  [[9]] $ &lt;env: package:utils&gt;</span>
<span class="co">#&gt; [[10]] $ &lt;env: package:datasets&gt;</span>
<span class="co">#&gt; [[11]] $ &lt;env: package:methods&gt;</span>
<span class="co">#&gt; [[12]] $ &lt;env: Autoloads&gt;</span>
<span class="co">#&gt; [[13]] $ &lt;env: package:base&gt;</span></code></pre></div>
<p>Isso significa que quando você digita o nome de uma função, primeiro o <a href="http://r-project.org">R</a> verifica se existe esse nome no ambiente global (<code>global</code> ou <code>R_GlobalEnv</code>), se não existir, será verificado no próximo ambiente, que no nosso caso é <code>package:usethis</code>, e assim sucessivamente.</p>
<p>Um pacote só estará disponível no <strong>caminho de busca</strong> ser ele estiver <strong>anexado</strong>, não basta apenas <strong>carregar</strong> o pacote, como convencionalmente falamos. Porém, para esse pacote ter sido <strong>anexado</strong> ele foi primeiro <strong>carregado</strong>, e como já falado anteriormente, a função que faz isso sequencialmente é <code>library</code> ou <code>require</code>. De toda forma, em <a href="https://r-pkgs.org/namespace.html?q=NAMES#namespace">R Packages</a> diz-se que:</p>
<ul>
<li><p>O <strong>carregamento</strong> irá carregar o código, dados e quaisquer DLLs, registra os métodos S3 e S4, e executa a função <code><a href="https://rdrr.io/r/base/ns-hooks.html">.onLoad()</a></code>. Após isso, o pacote fica disponível na memória, mas não acessível no caminho de busca. Daí o usuário não terá como acessar os objetos do pacote diretamente, a menos que use <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code>, isto é, <code>nome_pacote::nome</code>, que por sua vez, <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code> realiza o carregamento do pacote, se ainda não estiver carregado, e posteriormente, acessa os objetos sem estarem anexados. É bom lembrar que <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code> não acessa os objetos pelo ambiente <code>package:nome_pacote</code> no caminho de busca, até porque o pacote pode ainda nem ter sido anexado. É muito raro precisar de carregar um pacote explicitamente, <em>a menos que você precise saber internamente no seu pacote, se determinado pacote foi carregado</em><a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. Caso também deseje acessar funções internas não exportáveis do pacote, use <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">:::</a></code>;</p></li>
<li><p><strong>Anexar</strong> um pacote significa colocá-lo no <strong>caminho de busca</strong>. Não é possível anexar um pacote sem primeiro tê-lo carregado, que no caso <code>library</code> ou <code>require</code> realiza esse procedimento.</p></li>
</ul>
<p>Para finalizar esse entendimento, vejamos um último exemplo para sanar qualquer tipo de dúvida</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">old</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span><span class="op">(</span><span class="op">)</span>; <span class="va">old</span>
<span class="co">#&gt;  [1] ".GlobalEnv"        "package:pkgdown"   "package:usethis"  </span>
<span class="co">#&gt;  [4] "package:MCPtests"  "package:rlang"     "tools:rstudio"    </span>
<span class="co">#&gt;  [7] "package:stats"     "package:graphics"  "package:grDevices"</span>
<span class="co">#&gt; [10] "package:utils"     "package:datasets"  "package:methods"  </span>
<span class="co">#&gt; [13] "Autoloads"         "org:r-lib"         "package:base"     </span>
<span class="fu">meupacoter</span><span class="fu">::</span><span class="fu"><a href="../reference/aritmetica.html">aritmetica</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">4</span>, op <span class="op">=</span> <span class="st">'soma'</span><span class="op">)</span>
<span class="co">#&gt;[1] 12</span>

<span class="fu"><a href="https://rdrr.io/r/base/sets.html">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">old</span><span class="op">)</span>
<span class="co">#&gt;character(0)</span>
<span class="fu"><a href="../reference/aritmetica.html">aritmetica</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">4</span>, op <span class="op">=</span> <span class="st">'soma'</span><span class="op">)</span>
<span class="co">#&gt; Error in aritmetica(8, 4, op = "soma") : </span>
<span class="co">#&gt;   não foi possível encontrar a função "aritmetica"</span>

<span class="co"># Se não tiver com o pacote instalado, use:</span>
<span class="co"># devtools::install_github("bendeivide/meupacoter")</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://bendeivide.github.io/meupacoter">meupacoter</a></span><span class="op">)</span>
<span class="fu"><a href="../reference/aritmetica.html">aritmetica</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">4</span>, op <span class="op">=</span> <span class="st">'soma'</span><span class="op">)</span>
<span class="co">#&gt; [1] 12</span>
<span class="fu"><a href="https://rdrr.io/r/base/sets.html">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">old</span><span class="op">)</span>
<span class="co">#&gt; [1] "package:meupacoter"</span>

<span class="co"># Caminho de busca após o library(meupacoter)</span>
<span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;  [1] ".GlobalEnv"         "package:meupacoter" "package:pkgdown"   </span>
<span class="co">#&gt;  [4] "package:usethis"    "package:MCPtests"   "package:rlang"     </span>
<span class="co">#&gt;  [7] "tools:rstudio"      "package:stats"      "package:graphics"  </span>
<span class="co">#&gt; [10] "package:grDevices"  "package:utils"      "package:datasets"  </span>
<span class="co">#&gt; [13] "package:methods"    "Autoloads"          "org:r-lib"         </span>
<span class="co">#&gt; [16] "package:base"  </span></code></pre></div>
<p>Para entender um pouco mais sobre ambientes no <a href="http://r-project.org">R</a>, ver Seção <a href="environments.html">Ambientes em R</a>. De acordo com o que comentamos sobre o <strong>caminho de busca</strong>, poderíamos nos perguntar, se nós criássemos uma função, cujo o nome é idêntico a uma outra função de outro pacote anexado ao <strong>caminho de busca</strong>, ou anexasse um outro pacote anterior que também teria uma função com o mesmo nome, o pacote de interesse não poderia sofrer algum problema de execução, resultado, ou qualquer outro problema que o interferisse? A resposta é não, e graças ao <em>NAMESPACE</em>. Um pacote tem dois ambientes:</p>
<ul>
<li>
<strong>ambiente de pacote</strong>: é a interface externa do pacote, do qual o usuário <a href="http://r-project.org">R</a> pode encontrar pelo caminho de busca ou por <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code>. Todo ambiente tem um parental, nesse caso, o ambiente parental de um ambiente de pacote é ordenado de acordo com o caminho de busca. E todo pacote anexado é o parental do ambiente global. Veja no exemplo a seguir, o que estamos querendo dizer. Por exemplo, existe uma mesma função <code>summarize</code> nos pacotes <a href="http://plyr.had.co.nz/">plyr</a> e <a href="https://cran.r-project.org/packages=Hmisc">Hmisc</a>. Dependendo de como você anexar a ordem dos pacotes, por exemplo, a função <code>summarize</code> pode ter vindo de um ou do outro pacote.</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://had.co.nz/plyr">plyr</a></span><span class="op">)</span>
<span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/fn_env.html">fn_env</a></span><span class="op">(</span><span class="va">summarize</span><span class="op">)</span>
<span class="co">#&gt; &lt;environment: namespace:plyr&gt;</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://biostat.mc.vanderbilt.edu/Hmisc">Hmisc</a></span><span class="op">)</span>
<span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/fn_env.html">fn_env</a></span><span class="op">(</span><span class="va">summarize</span><span class="op">)</span>
<span class="co">#&gt; &lt;environment: namespace:Hmisc&gt;</span>

<span class="co"># Caminho de busca</span>
<span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;  [1] ".GlobalEnv"         "package:Hmisc"      "package:ggplot2"   </span>
<span class="co">#&gt;  [4] "package:Formula"    "package:survival"   "package:lattice"   </span>
<span class="co">#&gt;  [7] "package:plyr"       "package:meupacoter" "package:pkgdown"   </span>
<span class="co">#&gt; [10] "package:usethis"    "package:MCPtests"   "package:rlang"     </span>
<span class="co">#&gt; [13] "tools:rstudio"      "package:stats"      "package:graphics"  </span>
<span class="co">#&gt; [16] "package:grDevices"  "package:utils"      "package:datasets"  </span>
<span class="co">#&gt; [19] "package:methods"    "Autoloads"          "org:r-lib"         </span>
<span class="co">#&gt; [22] "package:base"  </span></code></pre></div>
<p>Isso significa que o último pacote anexado foi o pacote <code>Hmisc</code>, então na hora de buscar a função <code>summarize</code>, o pacote primeiro pesquisado é o <code>Hmisc</code>. Como alternativa, poderia ser utilizado <code><a href="https://rdrr.io/pkg/plyr/man/summarise.html">plyr::summarize</a></code> ou <code><a href="https://rdrr.io/pkg/Hmisc/man/summarize.html">Hmisc::summarize</a></code> para resolver este problema. Mais ainda, e se no ambiente global houvesse um objeto com esse nome, ele iria sobrepor independente da ordem de anexar o pacote, porque ele sempre é o primeiro ambiente no <strong>caminho de busca</strong>, veja:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Primeiro criando o objeto</span>
<span class="va">summarize</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"Nada"</span><span class="op">)</span>
<span class="op">}</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://had.co.nz/plyr">plyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://biostat.mc.vanderbilt.edu/Hmisc">Hmisc</a></span><span class="op">)</span>

<span class="co"># Verificando o ambiente de 'summarize'</span>
<span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/fn_env.html">fn_env</a></span><span class="op">(</span><span class="va">summarize</span><span class="op">)</span>
<span class="co">#&gt; &lt;environment: R_GlobalEnv&gt;</span>

<span class="co"># Caminho de busca</span>
<span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;  [1] ".GlobalEnv"         "package:Hmisc"      "package:plyr"      </span>
<span class="co">#&gt;  [4] "package:rlang"      "package:ggplot2"    "package:Formula"   </span>
<span class="co">#&gt;  [7] "package:survival"   "package:lattice"    "package:meupacoter"</span>
<span class="co">#&gt; [10] "package:pkgdown"    "package:usethis"    "package:MCPtests"  </span>
<span class="co">#&gt; [13] "tools:rstudio"      "package:stats"      "package:graphics"  </span>
<span class="co">#&gt; [16] "package:grDevices"  "package:utils"      "package:datasets"  </span>
<span class="co">#&gt; [19] "package:methods"    "Autoloads"          "package:base</span></code></pre></div>
<ul>
<li>
<strong>ambiente de <em>namespace</em> </strong>: representa a interface interna no pacote. É o ambiente onde o pacote controla as suas funções. Cada ligação no ambiente de pacote também está no ambiente de <em>namespace</em>. Contudo, algumas funções ocorrem apenas no ambiente de namespace, e quem controla isso é o desenvolvedor do pacote, por meio do arquivo <em>NAMESPACE</em>.</li>
</ul>
<p>Quanto a hierarquização de ambientes, cada ambiente de <em>namespace</em> apresenta um mesmo grupo de ancestrais, que segue:</p>
<ul>
<li>Ambiente de namespace <span class="math inline">\(&gt;\)</span> Ambiente de importações <span class="math inline">\(&gt;\)</span> Ambiente de <em>namespace</em> do pacote <span class="math inline">\(\color{red}{base}\)</span> <span class="math inline">\(&gt;\)</span> Ambiente Global.</li>
</ul>
<p>O ambiente de importações contém todas as ligações para todas as funções do pacotes, porém, importar implicitamente todas as funções do pacote <span class="math inline">\(\color{red}{base}\)</span> poderia ser demorado. Assim, existe um ambiente de <em>namespace</em> do pacote <span class="math inline">\(\color{red}{base}\)</span> que tem como ancestral o ambiente global. Dessa forma, se o pacote não encontrar as ligações necessárias no ambiente de importações, será procurado de forma usual. E isso não será uma boa escolha porque dependerá do anexamento de outros pacotes, e para evitar essa escolha o <code>R CMD check</code> avisará automaticamente sobre essa decisão. Veja a representação a seguir.</p>
<p align="center">
<img src="namespace.png" alt="" width="70%"></p>
<p>Aqui, temos a função <code>sd</code> que calcula o desvio padrão de um conjuntos de dados, do pacote <span class="math inline">\(\color{red}{stats}\)</span>. Essa função é apresentada na linha de comando:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sd</span>
<span class="co">#&gt; function (x, na.rm = FALSE) </span>
<span class="co">#&gt; sqrt(var(if (is.vector(x) || is.factor(x)) x else as.double(x), </span>
<span class="co">#&gt;     na.rm = na.rm))</span>
<span class="co">#&gt; &lt;bytecode: 0x0000000008e828a0&gt;</span>
<span class="co">#&gt; &lt;environment: namespace:stats&gt;</span>
<span class="co">#&gt; function (x, na.rm = FALSE) </span>
<span class="co">#&gt; sqrt(var(if (is.vector(x) || is.factor(x)) x else as.double(x), </span>
<span class="co">#&gt;     na.rm = na.rm))</span>
<span class="co">#&gt; &lt;bytecode: 0x0000001b97450678&gt;</span>
<span class="co">#&gt; &lt;environment: namespace:stats&gt;</span></code></pre></div>
<p>Perceba que essa função depende de outra função do pacote <span class="math inline">\(\color{red}{stats}\)</span>, <code>var</code> que calcula a variância de um conjunto de dados. Por alguma razão, nós criamos um objeto com o mesmo nome <code>var</code>, no ambiente global. Toda função capta as informações disponíveis no caminho de busca, logo quando eu usasse a função <code>sd</code>, ela poderia ter algum conflito com a função <code>var</code> dentro do pacote, porque quando a função olhasse para o caminho de busca e procurasse por <code>var</code> este não iria ser o objeto desejado, com o objeto criado <code>var</code> no ambiente global. Vejamos</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Veja como uma funcao capta a informacao do ambiente global</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">2</span>
<span class="va">aux</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu">aux</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] 2</span>
  
<span class="co"># Testando a funcao sd(x)</span>
<span class="co">#------------------------</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span> <span class="co"># o resultado de sd(x) de ser 1!</span>
<span class="co"># Criar uma variavel no ambiente global, 'var = "Nada"'. Isso,</span>
<span class="co"># implica que se 'sd' usar essa informacao, devera retornar um</span>
<span class="co"># erro, pq sd se baseia em um vetor numerico</span>
<span class="va">var</span> <span class="op">&lt;-</span> <span class="st">"Nada"</span>

<span class="co"># Testando sd(x)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] 1</span>

<span class="co"># Agora veja uma outa situacao:</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>

<span class="co"># Funcao 'var' que criamos, que nao calcula variancia de dados</span>
<span class="va">var</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="st">"Nada"</span><span class="op">)</span>

<span class="co"># Funcao que depende de 'var' do pacote stats, e calcula a variancia </span>
<span class="va">aux</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">vari</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">var</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">vari</span><span class="op">)</span>
<span class="op">}</span>
<span class="co"># O resultado mostra, que a funcao aux como esta no ambiente global, ela não tem um namespace porque nao esta em pacote algum.</span>
<span class="co"># No caminho de busca, o ambiente do pacote 'stats' estara na posicao 3, isso significa que a funcao aux ao buscar por 'var', encontrar primeiro no ambiente global, que nao seria o objeto desejado.</span>
<span class="va">aux</span>
<span class="co">#&gt; [1] "Nada"</span></code></pre></div>
<p>Observe pelo exemplo acima, que a função retorna <code>sd(x) = 1</code>. Ou seja, quem fez o papel de escolha das ligações internas da função do pacote foi o ambiente <em>namespace</em>, ele garante que não haja conflito de funções entre funções de outros pacotes ou objetos.</p>
<p>Portanto, o arquivo <em>NAMESPACE</em> controlado pelo desenvolvedor do pacote, irá determinar quais as funções do pacote que serão exportadas para o usuário utilizar e quais as funções importadas de outros pacotes que serão inseridas no pacote desenvolvido, e ainda as que não serão exportadas, são as funções internas. Quando <a href="construindo_pacote.html#building_rpack">criamos um pacote pelo R</a> um arquivo <em>NAMESPACE</em> é criado no diretório do projeto do pacote com uma única expressão:</p>
<pre><code>exportPattern("^[^\\.]")</code></pre>
<p>Isso significa que o pacote exportará todas as suas funções criadas, exceto as que se iniciarem por ponto. Contudo, esse padrão não é recomendado porque quanto mais funções exportadas, maiores são as chances de haver conflito com outras funções de outros pacotes.</p>
<p>O arquivo <em>NAMESPACE</em> não escrito na linguagem <a href="http://r-project.org">R</a>, embora tenha muita semelhança, e sim, diretivas de <em>namespace</em> que descrevem as importações e exportações de funções. Existem oito diretivas (<a href="https://r-pkgs.org/namespace.html?q=NAMES#namespace-NAMESPACE">R packages</a>), das quais quatro descrevem as exportações:</p>
<ul>
<li>
<code>export()</code>: funções de exportação (incluindo o método S3 e S4);</li>
<li>
<code>exportPattern()</code>: exporta todas as funçõe;</li>
<li>
<code>exportClasses()</code>, <code>exportMethods</code>: exporta classes e métodos S4;</li>
<li>
<code>S3method()</code>: exporta o método S3,</li>
</ul>
<p>e quatro descrevem as importações:</p>
<ul>
<li>
<code>import()</code>: importa todas as funções de um pacote;</li>
<li>
<code>importFrom</code>: importa funções selecionadas;</li>
<li>
<code>importClassesFrom()</code>, <code>importMethodsFrom()</code>: importa classes e métodos S4;</li>
<li>
<code>useDynlib()</code>: importar uma função em linguagem <em>C</em>. Ver <a href="other_languages.html">Integração com outras linguagens de programação</a>.</li>
</ul>
<p>Para configurar o <em>NAMESPACE</em> recomendamos utilizar o pacote <a href="https://roxygen2.r-lib.org/">roxygen2</a>, na Seção <a href="conf_files_pkg.html#docs_rpkg">Documentando as funções do pacote</a>. Veremos na Seção <a href="datasetr.html">Inserindo dados em um pacote</a>, que os arquivos de conjunto de dados que poderemos inserir nos pacotes, para utilizar em nossos exemplos, não precisam do mecanismo de <em>namespace</em> usual, e portanto não precisam ser exportados.</p>
<div id="dep_imp_namespace" class="section level3">
<h3 class="hasAnchor">
<a href="#dep_imp_namespace" class="anchor"></a>Relação entre os campos <code>Depends</code>, <code>Imports</code> e o <em>NAMESPACE</em>
</h3>
<p>Algo que se torna confuso, acho que o nome dos campos <code>Depends</code> e <code>Imports</code> no arquivo <a href="conf_files_pkg.html#description"><em>DESCRIPTION</em></a> ajudam nisso, é que esses campos não importam funções para o ambiente <em>namespace</em>. A função deles é garantir que ao instalar o seu pacote, as suas dependências de pacotes também sejam instaladas.</p>
<p>A importação de funções de outros pacotes para o seu pacote, isto é para o ambiente <em>namespace</em> do seu pacote, é exclusividade do arquivo <em>NAMESPACE</em>. Contudo, se usarmos o operador <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code> dentro das funções do seu pacote, isto é, fizemos um chamamento implícito sobre as funções dos pacotes dependentes, não será necessário mencionar no <em>NAMESPACE</em>. Vejamos os exemplos,</p>
<ul>
<li>
<p>Usando a importação via <code>importFrom</code> no <em>NAMESPACE</em>:</p>
<ul>
<li>Arquivo <em>DESCRIPTION</em>
</li>
</ul>
<pre><code>...
Imports stats</code></pre>
<ul>
<li>Arquivo <em>NAMESPACE</em>
</li>
</ul>
<pre><code>...
importFrom("stats","qtukey")</code></pre>
<ul>
<li><em>R/funcao.R</em></li>
</ul>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">facao_do_pacote</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span><span class="op">{</span>
  <span class="co"># corpo da funcao</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/Tukey.html">qtukey</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</li>
<li>
<p>Usando o operador <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code>:</p>
<ul>
<li>Arquivo <em>DESCRIPTION</em>
</li>
</ul>
<pre><code>...
Imports stats</code></pre>
<ul>
<li>Arquivo <em>NAMESPACE</em>
</li>
</ul>
<pre><code>...</code></pre>
<ul>
<li><em>R/funcao.R</em></li>
</ul>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">facao_do_pacote</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span><span class="op">{</span>
  <span class="co"># corpo da funcao</span>
  <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Tukey.html">qtukey</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</li>
</ul>
<p>Usar o operador <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code> pode se tornar mais trabalhoso de escrever as funções, porém, muito mais fácil deixar documentado para futuras atualizações, uma vez que saberemos a origem das funções por esse procedimento. Contudo, se for utilizado repetidas vezes uma mesma função, é preferível a importação via <code>importFrom()</code> do que <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">::</a></code>, uma vez que o segundo tipo adiciona <span class="math inline">\(5~\mu s\)</span> de tempo de avaliação da função (<a href="https://r-pkgs.org/namespace.html?q=NAMES#import-r">R packages</a>). Além de importação de funções, também é possível a importação de operadores, tais como, <code>importFrom("magrittr", "%&gt;%")</code>.</p>
<p>Por fim, uma regra todo pacote mencionado no <em>NAMESPACE</em> deve está em <code>Depends</code> ou <code>Imports</code>, no arquivo <em>DESCRIPTION</em>. Mas o inverso não é verdade, e foi mostrado anteriormente. Mais detalhes de como importar funções usando o <em>NAMESPACE</em>, ver Seção <a href="conf_files_pkg.html#docs_rpkg">Documentando as funções do pacote</a>.</p>
</div>
<div id="importação-e-exportação-de-funções" class="section level3">
<h3 class="hasAnchor">
<a href="#importa%C3%A7%C3%A3o-e-exporta%C3%A7%C3%A3o-de-fun%C3%A7%C3%B5es" class="anchor"></a>Importação e exportação de funções</h3>
<p>Na <a href="conf_files_pkg.html#dep_imp_namespace">seção anterior</a>, tivemos uma ideia de como importar funções. Mais detalhes, poderá ser visto na Subseção <a href="conf_files_pkg.html#edit-help-namespace">editando os arquivo de ajuda do pacote e o <em>NAMESPACE</em></a>.</p>
<p>A exportação de função se refere as funções desenvolvidas no pacote que desejamos exportá-la, isto é, torná-la disponível para o usuário. Dessa forma, usaremos o arquivo <em>NAMESPACE</em> para tal fim. Usaremos a diretiva <code>export("nome_funcao")</code>, explicitando o nome da função, a qual queremos exportar. As demais diretivas foram mencionadas na Seção <a href="conf_files_pkg.html#dep_imp_namespace">Entendendo o <em>Namespace</em></a>. <a href="conf_files_pkg.html#docs_rpkg">Toda função exportada deve ser documentada</a>, isto é, criarmos os arquivos de ajuda, <em>/man/<arquivo>.Rd</arquivo></em>.</p>
<p>Como já mencionamos, quando desejamos compartilhar um pacote sobre o <a href="cran.r-project.org">CRAN</a>, não recomendamos o uso da diretiva <code>exportPattern("^[^\\.]")</code>, pelos conflitos que possam existir entre pacotes, ao exportar todas as funções, ainda mais se seu pacote tiver muitas funções.</p>
<p>Algumas outras funções podem auxiliar as funções principais do pacote dos quais pensamos exportá-las. Dessa forma, não faz sentido essas funções auxiliares serem exportadas. Por exemplo, o pacote <a href="http://cran.r-project.org/package=SMR">SMR</a> foi objetivado para calcular a função densidade, função distribuição, função quantil e gerador de números aleatórios da estatística <em>midrange</em> de uma população normal. Dessa forma, só havia sentido exportarmos as funções <code>dSMR</code>, <code>pSMR</code>, <code>qSMR</code> e <code>rSMR</code>. Porém, usamos muitas funções auxiliares para essas funções principais, porém, como em algumas expressões chegávamos a integrais duplas ou triplas, nada trival para expressá-la analiticamente. Partimos assim, para aproximações numéricas, usando quadraturas gaussianas, mais especificamente a quadratura Gauss-Legendre. Uma forma de encontrar essas funções internas que não são exportadas é buscá-la no arquivo fonte, <em><nome_pacote>.tar.gz</nome_pacote></em>, no <a href="http://cran.r-project.org">CRAN</a>, ou usar o operador <code><a href="https://rdrr.io/r/base/ns-dblcolon.html">:::</a></code> usando linha de comando:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">SMR</span><span class="fu">:::</span><span class="va">GaussLegendre</span>
<span class="co">#&gt; function (size) </span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     size &lt;- as.integer(size)</span>
<span class="co">#&gt;     if (size &lt; 0) </span>
<span class="co">#&gt;         stop("Must be a non-negative number of nodes!")</span>
<span class="co">#&gt;     if (size == 0) </span>
<span class="co">#&gt;         return(list(x = numeric(0), w = numeric(0)))</span>
<span class="co">#&gt;     i &lt;- 1:size</span>
<span class="co">#&gt;     j &lt;- 1:(size - 1)</span>
<span class="co">#&gt;     mu0 &lt;- 2</span>
<span class="co">#&gt;     b &lt;- j/(4 * j^2 - 1)^0.5</span>
<span class="co">#&gt;     A &lt;- rep(0, size * size)</span>
<span class="co">#&gt;     A[(size + 1) * (j - 1) + 2] &lt;- b</span>
<span class="co">#&gt;     A[(size + 1) * j] &lt;- b</span>
<span class="co">#&gt;     dim(A) &lt;- c(size, size)</span>
<span class="co">#&gt;     sd &lt;- eigen(A, symmetric = TRUE)</span>
<span class="co">#&gt;     w &lt;- rev(as.vector(sd$vectors[1, ]))</span>
<span class="co">#&gt;     w &lt;- mu0 * w^2</span>
<span class="co">#&gt;     x &lt;- rev(sd$values)</span>
<span class="co">#&gt;     return(list(nodes = x, weights = w))</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;bytecode: 0x0000001b9eb6a4b8&gt;</span>
<span class="co">#&gt; &lt;environment: namespace:SMR&gt;</span></code></pre></div>
<p>Observe por esse exemplo que o objetivo do pacote não é apresentar uma função de aproximação numérica. Dessa forma, não se faz necessário exportar a função <code>GaussLegendre</code>. Para essas funções não serem exportadas, basta não serem mencionadas no <em>NAMESPACE</em>. Usando o pacote <a href="%5Broxygen2%5D(https://roxygen2.r-lib.org/)">roxygen2</a>, basta não comentar o <em>scripts</em> dessas funções. Veremos como fazer isso na Subseção <a href="conf_files_pkg.html#edit-help-namespace">Editando os arquivo de ajuda do pacote e o <em>NAMESPACE</em></a>.</p>
</div>
</div>
<div id="docs_rpkg" class="section level2">
<h2 class="hasAnchor">
<a href="#docs_rpkg" class="anchor"></a>Documentando as funções do pacote</h2>
<p>Vamos utilizar os recursos do pacote <a href="https://roxygen2.r-lib.org/">roxygen2</a> para documentar o pacote e configurar o <em>NAMESPACE</em>. A vantagem é que essa documentação e configuração é toda feita no próprio <em>script</em> do pacote, isto é, nos arquivos do subdiretório <em>R/</em>. Uma vez instalado o pacote <a href="https://roxygen2.r-lib.org/">roxygen2</a>, no <a href="http://rstudio.com">RStudio</a> configure-o:</p>
<p align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/Nw8ZBlmy3Yw" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</p>
<div id="pacote-roxygen2" class="section level3">
<h3 class="hasAnchor">
<a href="#pacote-roxygen2" class="anchor"></a>Pacote <a href="https://roxygen2.r-lib.org/">roxygen2</a>
</h3>
</div>
<div id="edit-help-namespace" class="section level3">
<h3 class="hasAnchor">
<a href="#edit-help-namespace" class="anchor"></a>Editando os arquivo de ajuda do pacote e o <em>NAMESPACE</em>
</h3>
</div>
</div>
<div id="resumo-do-que-vimos-nessa-seção" class="section level2">
<h2 class="hasAnchor">
<a href="#resumo-do-que-vimos-nessa-se%C3%A7%C3%A3o" class="anchor"></a>Resumo do que vimos nessa seção</h2>
<p>Em construção…</p>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Todos os pacotes com essa configuração, significa que estes são instaladaos com a intalação do <a href="http://r-project.org">R</a><a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Nesse caso, não se recomenda utilizar <code>library</code> ou <code>require</code> para essa finalidade. Para isso use <code>requireNamespace</code> ou <code>loadNamesoace</code>, ou insira os pacotes qe são dependentes nos campos <code>Depends</code>, <code>Imports</code>, ou em <code>Sugests</code><a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Ben Deivide.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
