---
title: "Configurando os arquivos básicos de um pacote"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Configurando os arquivos básicos de um pacote}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Introdução

Os arquivos do pacote, mencionados na Subseção [Esqueleto básico de um pacote R](construindo_pacote.html#sec-esqueleto), serão agora editados, uma vez que o [RStudio](https://rstudio.com/) constroi apenas um modelo para os arquivos.

Inicialmente, iremos apresentar duas rotinas para a construção do pacote:

* [aritmetica.R](https://github.com/bendeivide/meupacote/blob/main/R/aritmetica.R)

```{r aritmetica, eval = FALSE}
# Sem edição do pacote `roxygen2`
aritmetica <- function (a, b, op) {
  # op: divisi, multi, soma, subtra
  if (op == "divisi") x <- divisi(a, b)
  if (op == "multi") x <- multi(a,b)
  if (op == "soma") x <- soma(a,b)
  if (op == "subtra") x <- subtra(a,b)
  return(x)
}
```

* [auxiliar.R](https://github.com/bendeivide/meupacote/blob/main/R/auxiliar.R)

```{r auxiliar, eval=FALSE}
# Funcoes auxiliares

# Soma
soma <- function (a, b) {
          calculo <- a + b
          return(calculo)
}

#Subtracao
subtra <- function (a, b) {
            calculo <- a - b
            return(calculo)
}

# Multiplicacao
multi <- function (a, b) {
           calculo <- a * b
           return(calculo)
}

# Divisao
divisi <- function (a, b) {
            calculo <- a / b
            return(calculo)
}

```

A ideia dessas funções é muito simples, apresentar as quatro operações básicas entre dois números. Claro que não faz sentido desenvolver um pacote para algo trivial. Contudo, o enfoque é entender as peculiaridades do processo de construção de um pacote.

E um passo muito interessante ocorre sobre essas duas rotinas, pois uma iremos exportar e a outra não. Isto significa que ao carregar o pacote, funções do pacote que não são exportáveis, tornam-se invisíveis, podendo ser observadas apenas abrindo o arquivo **nome_pacote.tar.gz**. Às vezes, desejamos omitir algumas funções que são auxiliares para o nosso código. Isso significa, que elas sozinhas não terão utilidades. Dessa forma, não se faz necessário apresentá-las. Em outras situações, o que fazemos é omitir ou dificultar a visualização de determinadas funções, por algum interesse, mesmo sabendo que o código é aberto. 

No nosso caso, apenas a função `aritmetica` será exportável. Perceba, que o cerne do pacote está na rotina  [auxiliar.R](https://github.com/bendeivide/meupacote/blob/main/R/auxiliar.R), pois é nela que temos as quatro funções para as operações aritméticas.  Veremos mais a frente como definir a exportação de funções em um pacote.

## Atualizando as funções do pacote

Como já falado na Seção [Construindo o esqueleto de um pacote R](construindo_pacote.html), o subdiretório *R/* é o local para armazenar as rotinas do pacote. Dessa forma, vamos fazer as atualizações retirando os arquivos *.R* criados pelo [RStudio](https://rstudio.com/), e inserindo as rotinas do pacote  ([aritmetica.R](https://github.com/bendeivide/meupacote/blob/main/R/aritmetica.R) e [auxiliar.R](https://github.com/bendeivide/meupacote/blob/main/R/auxiliar.R)). Lembre-se das [boas práticas de como escrever um código R](introd_pkg.html#goodpractice).

<p align="center">
<img src="esqueleto2.png" alt="Esqueleto de um pacote R" width="30%">
</p>

## Editando o arquivo *DESCRIPTION*

Quando nós [criamos um projeto de pacote](construindo_pacote.html#building_rpack) usando o [RStudio](https://rstudio.com/), um arquivo chamado *DESCRIPTION* é criado no diretório do projeto do pacote. Talvez um dos mais importantes arquivos do pacote, pois esse arquivo contém os metadados sobre as característica do pacote, como o seu nome, título, versão, autor, descrição, licença, dentre outras opções. 

A estrutura básica é que cada linha se inicia com o nome do campo seguido de ":", posteriormente, se insere a atribuída a esse campo. Segundo o manual [Writing R extensions](https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file), os campos `Package`, `Version`, `Licence`, `Description`, `Title`, `Author` e `Mantainer` são obrigatórios . Todos os outros campos são opcionais. Todo o *DESCRIPTION* deve ser escrito em ASCII, isto é, caracteres sendo letras e números. Para utilizar caracteres diferentes, deve ser acrescentado o campo `Encoding` e informar o tipo de codificação. No pacote [meupacoter](https://bendeivide.github.io/meupacoter/), por exemplo, foi utilizado `Encoding: UTF-8`. 

```{description, eval = FALSE}
Package: nome do pacote
Title: O que o pacote faz (Em uma linha)
Version: 0.0.0.9000
Authors@R: 
    person(given = "First",
           family = "Last",
           role = c("aut", "cre"),
           email = "first.last@example.com",
           comment = c(ORCID = "YOUR-ORCID-ID"))
Maintainer: Nome e email do mantenedor do pacote
Description: O que o pacote faz (Em um parágrafo).
License: Qual a licença que você usa
```


Iremos discutir a ideia sobre alguns desses campos a seguir.

### Nome do pacote

A discução sobre o nome do pacote foi realizado na subseção [Escolha do nome e logo do pacote](introd_pkg.html#name_logo_pkg). O campo para o nome é `Package`, com as seguintes características ([Writing R extensions](https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file)):

* deve conter somente letras, números e ponto;
* ter pelo menos dois caracteres;
* começar com uma letra
* não terminar com um ponto. 

Esse campo não deve ser utilizado para explicar o que o pacote faz. Para isso use o campo `Description`.

### Título do pacote

O campo para o título do pacote é `Title`. Nele deve conter uma pequena descrição do pacote em uma única linha. Seguem alguns requisitos ([Writing R extensions](https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file)):
 
* Não use marcações for do pacrão ASCII;
* Não finalize o título com um ponto;
* Não repita o nome do pacote no título;
* Se usar a referência de outros pacotes no título, use aspas simples ('<outrs_pacotes>'), se referenciar livros, aspas duplas ("nome_livros");
* Geralmente limitado em 65 caracteres.

### Controle de versão do pacote

O campo responsável pela versão do pacote é `Version`. Deve ser uma sequência de ao menos dois números não negativos inteiros separados por um ponto ('.') ou traço ('-'). Por exemplo, 1.1 e 0.9.1-10 são versões válidas, mas essas versões 2 ou 2.0-devel não são válidas. No livro [R packages](https://combine-australia.github.io/r-pkg-dev/versioning.html), temos uma descrição detalhada e abordada a seguir. Usaremos também uma abordagem feita pelo [COMBINE](http://combine.org.au), pelo material [R package workshop](https://combine-australia.github.io/r-pkg-dev/).

Podemos dizer que a estrutura do controle de versão é formado por uma sequência de quatro dígitos: `<maior>.<menor>.<trecho>.<desenvolvimento>`. Vejamos,
```{r versao, eval = TRUE}
numeric_version("1.9") == numeric_version("1.9.0")
numeric_version("1.9") == numeric_version("1.9.0.0")
```
Isso significa dizer, se usarmos ao menos dois dígitos, os outros dígitos serão completados por zero (*default*). Vejamos o que significa cada dígito:

* Dígito `<maior>`: esse dígito é alterado quando o pacote passa por uma mudança significativa na atualização;
* Dígito `menor`: esse dígito é alterado quando ocorre alguma funcionalidade foi adicionada ao pacote, como criação de funções, atualizações de funções com os códigos existentes, etc;
* Dígito `trecho`: esse dígito se altera quando ocorre correções de erros (`bugs`) no pacote, mas não é acrescido nada de novo. Uma forma interessante de encontrar esses erros é criar uma página de problemas do pacote, e à medida que ocorre a experiência do usário com o pacote, alguns problemas podem ocorrer que não eram previstos pelo desenvolvedor. Dessa forma, esses problemas podem ser postados nessa página específica. No Github há uma aba chamada *issues* nos repositórios criados, que é específico para isso, e o link dessa página pode ser inserido no campo `BugReports` no arquivo *DESCRIPTION*;
* Dígito `desenvolvimento`: o dígito 9000 é utilizado quando o pacote está em desenvolvimento. Com essa codigifcação, podemos esperar mudanças muito rápidas no pacote.

Caso deseje alterar algum dos dígitos, o desenvolvedor pode alterar diretamente no arquivo *DESCRPTION*, ou usando (Exemplo realizado para o [meupacoter](https://bendeivide.github.io/meupacoter/)):
```{r altera_versao, eval = FALSE}
usethis::use_version()
Setting active project to '~/meupacoter'
There are uncommitted changes. Do you want to proceed anyway?

1: Negative
2: Nope
3: Yup

Selection: "<Escolhe uma das opções e digita: 1, 2 ou 3>"
Current version is 0.0.0.9000.
Which part to increment? (0 to exit) 

1: major --> 1.0.0
2: minor --> 0.1.0
3: patch --> 0.0.1
4:   dev --> 0.0.0.9001

Selection: "<Escolhe uma das opções e digita: 1, 2 ou 3>"
```

A primeira versão de um pacote que inicia o seu desenvolvimento é 0.0.0.9000.

Nós, particularmente, estamos usando a seguinte estratégia para o [meupacoter](https://bendeivide.github.io/meupacoter/), como o pacote está em desenvolvimento, e sua finalidade é ensinar a desenvolver pacotes, o que pretendemos é criar páginas web com o passo-a-passo. Assim, estamos usando o quarto dígito `9000`. Os acréscimos realizados sob o [GitHub](http://github.com), que levam em consideração as páginas web, estão alterando o dígito menor, porque a primeira versão quando for submetida ao [CRAN](http://cran.r-project.org), será `1.0.0`, de modo que o pacote estará estável, não haverá mais alterações no dígito maior (assim, esperamos!), apenas nos demais.

De fato, as sugestões dos números de versão mencionadas por [R packages](https://combine-australia.github.io/r-pkg-dev/versioning.html) e [R package workshop](https://combine-australia.github.io/r-pkg-dev/) ocorrem a cada alteração lançada ao [CRAN](http://cran.r-project.org), e o controle dos três dígitos para a versão, realmente é interessante. Entretanto, achamod que seguir a ideia dos três dígitos é interessante, mas não que isso fique martirzando a sua cabeça, uma vez que nos manuais do [CRAN](http://cran.r-project.org) não há condições restritivas para essas escolhas. Caso deseje detalhes, é só consultar [Writing R extensions, DESCRIPTION](https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file).

### Autor e Mantenedor

Os campos responsáveis pela criação do pacote, de forma direta ou indireta, são `Autor` ou `Authors@R` e `Mantainer`. Começando pelo último, este campo representa a pessoa responsável por manter o pacote sobre o [CRAN](http://cran.r-project.org), correção, atualização, etc. Apenas ele tem esse poder e deve ser uma pessoa e não uma empresa, de modo que seja válido enquanto o pacote estiver disponível no [CRAN](http://cran.r-project.org). O campo `Autor` ou `Authors@R` representa as pessoas que desenvolveram o pacote. O que diferencia esses dois campos é a forma de inserir as informações. Para o campo `Authors@R`, ainda pode ser inserido funções adicionais aos autores, algo como especifícações do que cada autor contribuiu de fato ao desenvolvimento do pacote. Apresentamos quatro funções importantes:

* `aut`: autores que fizeram contribuições significativas ao pacote;
* `cre`: mantenedor do pacote que estará responsável para resolver possíveis problemas do pacote;
* `ctb`: desenvolvedores que fizeram contribuições menores;
* `cph`: detentor dos direitos autorais, quando a autoria não é do autor, geralmente uma empresa.

Se desejar uma especificação mais detalhada sobre o seu papel como desenvolvedor, consulte mais siglas em [full list of roles](https://www.loc.gov/marc/relators/relaterm.html)

A forma básica de inserir os dados no campo `Mantainer` o primeiro e o último nome, seguido do email entre ("< >"), por exemplo, `Mantainer: Ben Deivide <ben.deivide@gmail.com>`. 

Para inserir as informações no campo `Author`, basta digitar o nome dos autores separados por vírgula, por exemplo: `Author: Ben Deivide, Daniel Furtado, Diego Arthur`.

Por fim, como já falado acima, uma descrição mais completa pode ser usando o campo `Authors@R`, inserindo a especificação de cada autor ao desenvolvimento do pacote, usando as siglas acima. E ainda mais, não será necessário inserir no arquivo *DESCRIPTION*  o campo `Mantainer`. Veremos a seguir, um exemplo do pacote [midrangeMCP](https://bendeivide.github.io/midrangeMCP/):
```{description_author}
Authors@R: c(
    person(given = "Ben", 
           family = "Deivide", 
           email = "ben.deivide@ufsj.edu.br", 
           role = c("aut", "cre"), 
           comment = c(ORCID = '0000-0001-7019-8794')),
    person(given = "Daniel", 
           family = "Furtado", 
           email = "danielff@dex.ufla.br", 
           role = "aut",
           comment = c(ORCID = '0000-0002-4371-5239')),
    person(given = "Diego", 
           family = "Arthur", 
           email = "digo.arthur@hotmail.com", 
           role = "ctb"))
```
Dentro do campo `Authors@R`, inserimos para cada desenvolvedor, uma descrição dentro da função chamada `person`, do pacote `utils`, veja o resultado da sua execução:

```{r person, eval = TRUE}
 person(given = "Ben", 
           family = "Deivide", 
           email = "ben.deivide@ufsj.edu.br", 
           role = c("aut", "cre"), 
           comment = c(ORCID = '0000-0001-7019-8794'))
```
Na função `person` o primeiro argumento representa o primeiro nome do autor (`given`) e o segundo (`family`), o último nome. Posteriormente, temos o argumento para o email (`email`), e em seguida, o argumento para identificar a especificação do autor para o pacote (argumento `role`). Por fim, acrescentamos em `comment`, uma informação adicional que foi o [ORCID](https://orcid.org/) dos respectivos autores. Percebam pelas regras atribuídas aos desenvolvedores que Ben Deivide e Daniel Furtado são autores (regra `'aut'`), e o primeiro é também mantenedor (regra `'cre'`). No caso de Diego Arthur, como o seu desenvolvimento teve menores contribuições ao pacote, a regra foi `'ctb'`. Dessa forma, não será necessário inserir o campo `Mantainer`.

### Descrição

O campo responsável no arquivo *DESCRIPTION* para descrever e detalhar o que faz o pacote é `Description`. Deve conter apenas um parágrafo. Vejamos mais algumas informações ([R packages](https://combine-australia.github.io/r-pkg-dev/versioning.html)):

* Evite iniciar a descrição com o nome do pacote, ao invés, use *Esse pacote...* ou algo similar;
* Quando a descrição estiver em mais de uma linha, cada linha deve conter no máximo 80 caracteres, e a partir da segunda linha, dê 4 espaços para iniciá-la;
* Assim como no campo `Title`, devemos usar aspas duplas ("texto") para referenciar livros, artigos, aspas simples para palavras que não estão em inglês, incluindo nomes de pacotes, softwares externos, etc.
* Para utilização de sites, use aspas simples com colchetes angulares, isto é, ‘<https://www.r-project.org>’.

Vejamos um exemplo do *DESCRIPTION* do pacote [midrangeMCP](https://cran.r-project.org/web/packages/gnomeGUI/index.html):

```{}
Description: Apply tests of multiple comparisons based
    on studentized 'midrange' and 'range' distributions. 
    The tests are: Tukey Midrange ('TM' test),
    Student-Newman-Keuls Midrange ('SNKM' test), 
    Means Grouping Midrange ('MGM' test) and 
    Means Grouping Range ('MGR' test). The articles of these 
    tests are in the submission phase, and we will soon update 
    the references.
```

### Campos opcionais ao *DESCRIPTION*

Alguns campos adicionais são interessantes e deixamos na tabela abaixo  para consulta ([Writing R extensions, DESCRIPTION](https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file)).

|Campos opcionais| Finalidade|
|----------------|-----------|
| `Data`         | Insere a data atualizada para submissão ao [CRAN](http://cran.r-project.org). Essa data é preferível deixar não ser colocada. Já tivemos rejeição de pacotes, simplesmente porque a data estava desatualizada. |
| `Depends`      | Campo utilizado para fornecer uma lista de pacotes, separados por vírgula, que o seu pacote depende. Esses pacotes serão instalados usando o argumento `dependencies` em `install.packages(pkgs = 'nome_pacote', dependencies =     TRUE)`, que `dependencies = TRUE` implica em instalar os pacotes do `Depends`, o dos campos  `Imports`, `LinkingTo`, `Suggests`. Veja Subseção [Campo Depends](conf_files_pkg.html#campo-depends) para mais detalhes.  |
| `Imports`      | Esse campo é utilizado para listar pacotes que são inseridos no [NAMESPACE](conf_files_pkg.html#docs_rpkg). Isso significa que ao importarmos funções de outros pacotes que serão necessários ao nosso pacote, poderão ser utilizados sem precisarmos carregar estes pacotes de origem destas funções. Funções que usamos os operadores "::" ou ":::", também deverão ser listados aqui, ou nos campos `Sugests` ou `Enhances`      |
| `Sugests`      | Esse campo usa a mesma sintaxe do campo `Depends` e lista os pacotes que não são necessariamente necessários. Geralmente são pacotes utilizados nos exemplos de documentação de ajuda do pacote (arquivos do subdiretório `man/~.Rd`), ou na descrição de um conjunto de dados inseridos no pacote; no auxílio dos tutoriais (*vignettes*), dentre outras situações, que não impede o bom funcionamento do pacote.      |
| `Enhances`| Campo que lista os pacotes que forncem um aprimoramento do pacote em questão, por exemplo, forncendo métodos para as classes desses pacotes ou maneiras de manipular objetos.|
| `SystemRequirements`       | Dependências externas ao sistema [R](http://r-project.org) devem ser listadas no campo `SystemRequirements`, sendo detalhados essa integração no arquivo *README*. Para mais detalhes veja a Subseção [Uso dos campos *NeedsCompilation* e *SystemRequirement*](conf_files_pkg.html#ext_files_r).        |
| `NeedsCompilation`   | Campo utilizado para identíficar códigos que necessitam de compilação antes da instalação do pacote. Nesse caso o campo deve assumir `NeedsCompilation:yes`. Caso contrário, se o pacote ao ser instalado em quaiquer plataformas e não precisar ser instalado ferramentas adicionais, use `NeedsCompilation:no`, esse é o padrão. Geralmente quando usamos o comando `R CMD build` para a compilação do pacote binário para a utilização no SO Windows, e esse pacote apresenta o subdiretório `src`, usamos `NeedsCompilation:yes`. Quando usamos esse tipo de compilação, não há no arquivo *DESCRIPTION* o campo `Authors@R`, por exemplo, e sim, os campos `Mantainer` e `Author`. Para mais detalhes veja a Subseção [Uso dos campos *NeedsCompilation* e *SystemRequirement*](conf_files_pkg.html#ext_files_r).|
|       `License`         |        [Licença R](https://www.r-project.org/Licenses/), [Writing R extensions,DESCRIPTION](https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file)|
|  `Copyright`   |  Usado quando o detentor dos direitos autorais não forem os autores. Se desejar, poderá inserir um arquivo (`COPYRIGHTS`) no pacote para um maior detalhamento. O convencional é usar o subdiretório `inst`, isto é, `inst/COPYRIGHTS`.Ver Seção [Subdiretórios adicionais](subdir_add.html#subdir_inst).     |
| `Additional_repositories`      |    O campo `Additional_repositories` é uma lista separada por vírgulas de URLs de repositório onde os pacotes nomeados em outros campos podem ser encontrados.       |
|  `LinkingTo`   |   Um pacote que deseja fazer uso de arquivos de cabeçalho em outros pacotes para compilar seu código *C/C++*  precisa declará-los como uma lista separada por vírgulas no campo `LinkingTo` no arquivo *DESCRIPTION*. Para detalhes veja o Git do pacote [BH](https://github.com/eddelbuettel/bh#bh-boost-headers-for-r)|
|   `BugReports` |   Campo que apresenta uma única URL específica para se reportar a erros do pacote. Uma das opções de hospedagem é via Github, na seção *issues*, veja a seção [Criar uma website para o pacote](construindo_website.html). Caso deseje especificar outro email para os possíveis erros, use o campo `Contact` para isso.  |
|   `URL`        | Campo para especificas uma listas de URLs separados por vírgula, que hoespeda a sua página pessoal ou a página do pacote. Uma das opções de hospedagem é via Github. Veja a seção [Criar uma website para o pacote](construindo_website.html)     |
|    `LazyData`  |   Campo lógico (`TRUE` ou `FALSE`), para para informar que existe um conjunto dados diponíveis no pacote para utilização        |
|     `KeepSource`  |  O campo lógico `KeepSource` controla se o código do pacote é originado usando `keep.source = TRUE` ou `FALSE`: pode ser necessário excepcionalmente para um pacote projetado para ser sempre usado com `keep.source = TRUE`. Para mais detalhes, [Writing R extensions, DESCRIPTION](https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file)        |
|   `ByteCompile` |  O campo lógico `ByteCompile` controla se o código do pacote deve ser compilado por byte na instalação: o padrão é compilar por byte. Isso pode ser sobrescrito instalando com o sinalizador `--no-byte-compile`.  Para mais detalhes, [Writing R extensions, DESCRIPTION](https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file)       |
|     `UseLTO`   | O campo lógico `UseLTO` é usado para o SO Unix para indicar se o código-fonte no pacote deve ser compilado com *Link-Time Optimization* (veja Usando [Link-Time Optimization](https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Using-Link_002dtime-Optimization)); se o R foi instalado com `--enable-lto` (*default*) ou `--enable-lto=R`.          |
|    `Collate`   |  Campo utilizado para controlar a ordem de agrupamento para os arquivos de código R em um pacote quando estes são processados para instalação do pacote. Para mais detalhes, [Writing R extensions, DESCRIPTION](https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file).        |
|     `BuildVignettes` |  Campo utilizado para evitar a construção dos tutoriais (*vignettes*) ao construir o pacote usando `R CMD check`. Geralmente quando tem imagens grandes no pacote. Mas ao usar `R CMD check --as-cran` ele é criado, independente do valor para `BuildVignettes`. O que nós observamos para o RStudio é que mesmo esse campo com o valor. Essa opção,  se o pacote [roxigen2](https://roxygen2.r-lib.org/) está ativado para a construção de toda a documentação, os tutoriais (*vignettes*) são criados independentes dessa opção quando usamos o botão **check**, que tem o mesmo objetivo do comando `R CMD check`. na prática, esse campo não deve ser utilizado, a menos que o código do pacote não seja do tipo "código-aberto".|
|     `BuildVignetter` | Campo responsável para informar quais os pacotes que renderizarão os tutoriais (vignettes). Pode ser informado o nome de um pacote ou uma lista de nomes de pacotes separados por vírgula. Por exemplo, em [meupacote](https://bendeivide.github.io/meupacoter/), nós usamos `VignetteBuilder: knitr`. Como na instalação do pacote, isso não é obrigatório, usamod no campo `Suggests: knitr, rmarkdown`, uma vez que o pacote [rmarkdown](https://rmarkdown.rstudio.com) está apenas como sugestão pelo pacote [knitr](https://yihui.org/knitr/). |
|      `Type`          |   Esse campo especifica a natureza do projeto. O padrão é assumir `Type: Package`. Por exemplo, podemos o pacote [gnomeGUI](https://cran.r-project.org/packages=gnomeGUI), foi desativado pelo CRAN, com natureza *frontend*, isto é, `Type: Frontend`.  |
|      `OS_type`       |   Esse campo especifica os sistemas operacionais para os quais o pacote se destina, sendo as opções 'unix' ou 'windows', para indicar que o pacote só pode ser instalado em uma plataforma dessas plataformas.      |
|  `Encoding`          |   Campo utilizado para identificar a codificação do pacote, diferente de ASCII, usada no *DESCRIPTION*, *NAMESPACE*, arquivos do tipo *R* e *.Rd*. As opções são `latin1`, `latin2` e `UTF-8`   |
|      `Language`      |    Campo utilizado para identificar o idioma que o código foi escrito. O padrão de idioma é o Inglês. De acordo com [R for Windows FAQ: Languages and Internationalization](https://cran.r-project.org/bin/windows/base/rw-FAQ.html#Languages-and-Internationalization), as opções de idiomas são:  `Catalan` (Catalão), `Simplified Chinese` (Chinês simplificado) `Traditional Chinese` (Chinês tradicional), `Czech` (Theco), `Danish` (Dinamarquês), `Dutch` (Holandês), `Finnish` (Finlandês), `French` (Francês), `German` (Alemão), `Greek` (Grego), `Hebrew` (Hebraico), `Hungarian` (Húngaro), `Italian` (Italiano), `Japanese` (Japonês), `Korean` (Coreano), `Norwegian` (Noroeguês), `Polish` (Polonês), `Portuguese (Brazil)` (Português brasileiro), `Portuguese (Portugal)` (Português de Portugal). O que sugerimos é que ao invés de utilizar o idioma nativo, pensando numa maior divulgação do pacote, o interessante é a internacionalização, ver Seção [Internacionalização de pacotes](interpack.html).   |
|      `RdMacros`      |   Campo utilizado para conter uma lista, separada por vírgula, de pacotes a partir da qual o pacote atual importará definições de macro Rd. Esses pacotes também devem estar listados nos campos `Imports` (ou ‘Depends’).      |


Outros campos não mencionados acima, podem ser utilizados. Por exemplo, campos como `Note`, `Contact`, `MailingList`, `RoxygenNote`, dentre outros.

#### Campo `Depends` {#campo-depends}

Vejamos mais algumas características sobre esse campo:

* O padrão do argumento `dependencies` da função `install.packages` é `NA`, que implica em instalar os pacotes dos campos `Depends`, `Imports` e `LinkingTo`. Se desejar instalar tudo, basta usar `install.packages(pkgs = 'nome_pacote', dependencies = c("Depends", "Imports", "LinkingTo", "Suggests", "Enhances"))`.  Os pacotes no campo `Depends` serão carregados antes dos pacotes de interesse serem carregados, usando `library` ou `require`;
* Cada pacote no campo `Depends` por ser seguido de um parêntes identificando a versão desejada, isto é, `Depends: MASS (>= 3.1)`. Contudo, ao inserir a versão, use apenas para os dois dígitos, evite inserir o dígito `<trecho>` (terceiro dígito);
* Não faz sentido inserir nesse campo, pacotes da base do [R](http://r-project.org), pois estes são instalados na instalação do próprio programa. Nesse campo também pode ser possível especificar determinada dependência da versão do [R](http://r-project.org), por exemplo, `Depends: R (>= 3.6)`;
* Pode ser repetido um pacote ou a versão R mais de uma vez, para limitar as versões aceitáveis;
* Evite comentários nesse campo, pois tanto a biblioteca de pacotes quanto os recursos de verificação do pacote R, usam esse campo, e isso pode acabar gerando problema ao bom funcionamento da linguagem;
* Na prática, o que se observa é que esse campo é utilizado para identificar a versão necessária do R para a utilização do pacote. Quando um pacote é necessário no pacote desenvolvido, o inserimos no NAMESPACE, e assim, as dependências internas do pacote dependentes de funções de outros pacotes, serão utilizadas sem que estes precisem ser carregados.

#### Uso pacotes dependentes em `Imports` ou `Depends`?

Vejamos as regras gerais ([Writing R extensions, DESCRIPTION](https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file)):

* Um pacote dependente deve ser listado em apenas um campos dos campos `Depends` ou `Imports`;
* Pacotes listados no *NAMESPACE* usando `import` ou `importFrom` devem ser listados sempre no campo `Imports` e não em `Depends`;
* Caso contrário, se não for listado no *NAMESPACE*, para o carregamento do pacote usando a função `library`, os pacotes dependentes devem adicionados no campo `Depends`;
* Pacotes dependentes que utilizamos os seus conjuntos de dados em nosso pacote, devem ser listados no campo `Imports`

O campo 'Depends' atualmente deve ser usado raramente, apenas para a construção de pacotes em que desejamos que todas as funções dos pacotes dependentes estejam disponíveis para o usário, ao carregar o pacote desenvolvido, por questão de facilidade para o usuário. Caso contrário, o uso do campo `Imports` é mais coerente.

#### Uso dos campos `NeedsCompilation` e `SystemRequirements` {#ext_files_r}

O campo `SystemRequirements` quando utilizado no *DESCRIPTION*, 
significa que algum código não [R](http://r-project.org) que está inserido em seu código, e precisa ser informado

O subdiretório `src` é utilizado para códigos que precisam ser compilados, tais como *C*, *C++*, *Fortran*, dentre outros. O subdiretório `exec` ou `inst` é usado para inserir scripts que precisam ser interpretados, tais como *Shell*, *BUGS*, *JavaScript*, *Matlab*, *Perl*, *php(amap)*, *Phyton*, *Tcl*. O caso da linguagem *Java*, o mecanismo é um pouco diferente, ver [Writing R extensions§1.1.7](https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#The-DESCRIPTION-file). Observando os pacotes desenvolvidos, a convenção é usar no diretório  `inst`, do tipo `inst/perl`, `inst/tcl`, etc. Vejam alguns exemplos de pacotes:

* [WriteXLS](https://github.com/marcschwartz/WriteXLS)`/inst/Perl`, veja o seu *DESCRIPTION*:
```{}
Package: WriteXLS
Version: 6.1.0
Date: 2020-11-20
Title: Cross-Platform Perl Based R Function to Create Excel 2003 (XLS) and Excel 2007 (XLSX) Files
Description: Cross-platform Perl based R function to create Excel 2003 (XLS) and Excel 2007 (XLSX)
             files from one or more data frames. Each data frame will be
             written to a separate named worksheet in the Excel spreadsheet.
             The worksheet name will be the name of the data frame it contains
             or can be specified by the user. 
Author: Marc Schwartz <marc_schwartz@me.com> and various authors for Perl modules listed in each .pm file.
Copyright: The copyright holders of the Perl files are listed in each .pm file under the Perl directory.
Maintainer: Marc Schwartz <marc_schwartz@me.com>
License: GPL (>= 2)
SystemRequirements: Perl
Imports: utils
URL: https://github.com/marcschwartz/WriteXLS
BugReports: https://github.com/marcschwartz/WriteXLS/issues
```

* [rJava]()


Considere também que alguns pacotes já fizeram a integração de algumas linguagens, e até mencionados acima, tais como: pacote [reticulate](rstudio.github.io/reticulate) (*Phyton*), pacote [Rcpp](https://cran.r-project.org/package=Rcpp) (*C++*), pacote [rJava](http://www.rforge.net/rJava/) (*Java*), pacotes [tcltk]() hoje da base do [R](http://r-project.org) (*Tcl/Tk*), pacote [RGtk2](https://cran.r-project.org/package=RGtk2) (*GTK+*), dentre muitos outros, esses já fizeram a parte árdua de integração. Assim, necessitando de alguma dessas linguagens e usando esses pacotes não é necessário a utilização do campo `SystemRequirements`.

Por fim, a utilização do campo `SystemRequirements` necessita uma explicação mais detalhada sobre o pacote no arquivo *README*, pois para o bom funcionamento, precisamos muitas vezes fazer instalações externas ao sistema operacional em utilização. E mais uma vez, é um nível avançado de desenvolvimento de pacotes, pois não necessita apenas do conhecimento da linguagem [R](http://r-project.org), como também de outras linguagens. Um exemplo recente, foi um pacote chamado [gWidgets](https://cran.r-project.org/package=gWidgets) que foi desativado devido a problemas de instalação ao interpretação *GTK+*, que por sinal, um pacote muito bom para desenvolvimento de interfaces gráficas ao usuários, usando *Tcl/Tk* e *GTK+*








## Documentando as funções do pacote {#docs_rpkg}

## Editando o arquivo *NAMESPACE*


## Resumo do que vimos nessa seção
